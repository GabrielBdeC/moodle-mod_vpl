{"version":3,"file":"vplutil.min.js","names":["enhancedMouseMove","event","id","popUp","document","getElementById","style","display","left","clientX","top","clientY","enhancedMouseOver","_","enhancedMouseOut","define","$","jqui","log","VPLUtil","doNothing","noop","returnFalse","returnTrue","debugMode","m","forced","debug","setUserPreferences","pref","ajax","async","type","url","JSON","stringify","contentType","dataType","getUserPreferences","func","getPreferences","done","resp","vpl_global_lang","preferences","lang","scrollBarWidth","parent","child","width","appendTo","children","innerWidth","height","remove","sanitizeHTML","t","replace","html","sanitizeText","s","setProtocol","coninfo","secure","securePort","port","wsProtocol","window","location","protocol","URLBase","server","portToUse","monitorURL","monitorPath","executionURL","executionPath","ArrayBuffer2String","data","view","Uint8Array","chunks","chunkSize","i","len","length","push","String","fromCharCode","apply","subarray","Math","min","join","String2ArrayBuffer","ret","ArrayBuffer","u8","charCodeAt","fileUniqueId","getUniqueId","regExt","regImg","regBin","regBlk","fileExtension","fileName","res","exec","isImage","test","isBinary","isBlockly","regInvalidFileName","validFileName","getCurrentTime","parseInt","Date","valueOf","encodeBinary","name","btoa","unescape","encodeURIComponent","decodeBinary","decoded","atob","decodeURIComponent","escape","validPath","path","dirs","split","getFileName","dataFromURLData","substr","indexOf","readZipFile","save","progressBar","end","JUnzip","loadScript","ab","unzipper","isZipFile","readEntries","out","entries","process","isClosed","entry","match","processFile","uncompressed","compressionMethod","JSInflate","inflate","contents","encoding","blob","Blob","fr","FileReader","onload","e","target","result","onerror","readAsText","readSelectedFiles","filesToRead","pb","errorsMessages","setLabel","readSecuencial","sec","close","showErrorMessage","f","binary","reader","ext","toLowerCase","ex","error","readAsArrayBuffer","readAsDataURL","MIME","getMIME","getTimeLeft","timeLeft","minute","hour","day","timePending","days","hours","minutes","seconds","maplang","langType","i18n","strreg","str","key","parm","setStr","newi18n","hasOwnProperty","dialogbaseOptions","minWidth","autoOpen","closeText","modal","dialogClass","VPLi18n","delayedActions","afterAllActions","shortTimeout","longTimeout","numberDelayed","delay","arg1","arg2","clearTimeout","setTimeout","longDelay","setAfterTimeout","afterAll","iconModified","iconDelete","iconClose","iconRequired","iconFolder","menuIcons","genIcon","icon","size","classes","icons","setTitleBar","dialog","buttons","handler","title","find","genButton","titleButtons","titleText","ih","button","click","css","on","blur","setDialogTitleIcon","message","onUserClose","labelHTML","sppiner","pbHTML","HTML","append","progressbar","label","resizable","minHeight","originalEvent","text","titleTag","siblings","showMessage","initialoptions","options","extend","messageDialog","messageButtons","ok","yes","next","setMessage","men","currentOptions","requestAction","action","URL","noDialog","deferred","Deferred","request","xhr","apb","readyState","abort","beforeSend","jqXHR","always","response","success","reject","resolve","fail","textStatus","errorThrown","undefined","supportWebSocket","isAndroid","navigator","userAgent","isFirefox","isMac","clickServer","w","h","screen","features","win","open","attr","preventDefault","hide","acceptCertificates","servers","getLastAction","n","monitorRunning","lastProccessID","setProcessId","getProcessId","webSocketMonitor","running","externalActions","processid","ws","defail","delegated","messageActions","content","parsed","state","detail","getConsole","isOpen","compilation","setResult","retrieve","ajaxurl","run","WebSocket","notOpen","onopen","onclose","disconnect","onmessage","CLOSED","directRun","command","files","homepath","connection","directRunTest","mcount","send","code","reason","processResult","filenames","sh","noFormat","folding","escReg","regClassList","regex","class","regCaseOriginal","regError","RegExp","regWarning","regInformation","lines","regFiles","lastAnotation","lastAnotationFile","afterTitle","getHref","getTagId","regf","reg","en","genFileLinks","line","rawline","used","anot","getAnnotations","search","href","lt","substring","setAnnotations","getTitle","linesFormat","forEach","some","regClass","spliceLines","el","arr","idSearch","beginId","endId","countLines","elementSpliced","splice","insertElement","map","info","filter","caseGroup","loading","buffer","idPop","sanitizedLine","tooltipHtml","index","splitBr","scriptsLoaded","scripts","scriptURL","shift","script","createElement","src","scriptPath","head","appendChild","isScriptLoading","isScriptLoaded","adjustBlockly","work","offx","offy","blocks","getAllBlocks","miy","may","mix","max","xy","getRelativeToSurfaceXY","y","x","getTopBlocks","j","moveBy","results","shs","SubmissionHighlighter","self","highlight","prototype","highlightBlockly","preid","tag","c","show","xml","Blockly","Xml","textToDom","toolbox","readOnly","media","inject","domToWorkspace","hg","svgResize","resizeSvgContents","dispose","needAce","file","ace","shFiles","shFileNames","tagId","edit","setTheme","theme","getSession","setMode","renderer","setShowGutter","showln","setReadOnly","setHighlightActiveLine","setAutoScrollEditorIntoView","setOption","nl","a","vplTagId","ri","textContent","innerText","innerHTML","addResults","syntaxHighlightFile","syntaxHighlight","flEventHandler","getAttribute","gotoLine","scrollToLine","setflEventHandler","links","getElementsByClassName","onclick","showHideDiv","div","nextSibling","parentNode","nodeName","savedDisplay","VPLDebugMode","init"],"sources":["../src/vplutil.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Tools for the VPL IDE\n *\n * @copyright 2016 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\n/* globals JUnzip */\n/* globals JSInflate */\n/* globals Blockly */\n/* globals ace */\n\n\nfunction enhancedMouseMove(event, id){\n\tvar popUp = document.getElementById(\"enhancedPop\" + id);\n\tif (popUp.style.display == \"block\"){\n\t\tpopUp.style.left = event.clientX + \"px\";\n\t\tpopUp.style.top = event.clientY + \"px\";\n\t}\n}\n\nfunction enhancedMouseOver(_, id){\n\tdocument.getElementById(\"enhancedPop\" + id).style.display = \"block\";\n};\n\nfunction enhancedMouseOut(_, id){\n\tdocument.getElementById(\"enhancedPop\" + id).style.display = \"none\";\n};\n\ndefine(\n    [\n        'jquery',\n        'jqueryui',\n        'core/log',\n    ],\n    function($, jqui, log) {\n        var VPLUtil = {};\n        VPLUtil.doNothing = $.noop;\n        VPLUtil.returnFalse = function() {\n            return false;\n        };\n        VPLUtil.returnTrue = function() {\n            return true;\n        };\n        var debugMode = false;\n        VPLUtil.log = function(m, forced) {\n            if (debugMode || forced) {\n                log.debug(m);\n            }\n        };\n        VPLUtil.setUserPreferences = function(pref) {\n            $.ajax({\n                async: true,\n                type: \"POST\",\n                url: '../editor/userpreferences.json.php',\n                'data': JSON.stringify(pref),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\"\n            });\n        };\n        VPLUtil.getUserPreferences = function(func) {\n            $.ajax({\n                async: true,\n                type: \"POST\",\n                url: '../editor/userpreferences.json.php',\n                'data': JSON.stringify({getPreferences: true}),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\"\n            }).done((resp)=>{\n                vpl_global_lang = resp.preferences.lang;\n                func(resp);\n            });\n        };\n        // Get scrollBarWidth.\n        VPLUtil.scrollBarWidth = function() {\n            var parent, child, width;\n            parent = $('<div style=\"width:50px;height:50px;overflow:auto\"><div/></div>').appendTo('body');\n            child = parent.children();\n            width = child.innerWidth() - child.height(99).innerWidth();\n            parent.remove();\n            return width;\n        };\n        VPLUtil.sanitizeHTML = function(t) {\n            if (typeof t == 'undefined' || t.replace(/^\\s+$/g, '') == '') {\n                return '';\n            }\n            return $('<div>' + t + '</div>').html();\n        };\n        VPLUtil.sanitizeText = function(s) {\n            if (typeof s == 'undefined' || s.replace(/^\\s+$/g, '') == '') {\n                return '';\n            }\n            return s.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n        };\n\n        VPLUtil.setProtocol = function(coninfo) {\n            var secure;\n            if (coninfo.securePort == 0 || coninfo.port == 0) {\n                secure = coninfo.port == 0;\n            } else {\n                switch (coninfo.wsProtocol) {\n                    case 'always_use_wss':\n                        secure = true;\n                        break;\n                    case 'always_use_ws':\n                        secure = false;\n                        break;\n                    default:\n                        secure = window.location.protocol == 'https:';\n                }\n            }\n            var URLBase = (secure ? 'wss://' : 'ws://') + coninfo.server;\n            coninfo.secure = secure;\n            coninfo.portToUse = secure ? coninfo.securePort : coninfo.port;\n            URLBase += ':' + coninfo.portToUse + '/';\n            coninfo.monitorURL = URLBase + coninfo.monitorPath;\n            coninfo.executionURL = URLBase + coninfo.executionPath;\n        };\n        VPLUtil.ArrayBuffer2String = function(data) {\n            var view = new Uint8Array(data);\n            var chunks = [];\n            var chunkSize = 32000;\n            var i, len;\n            for (i = 0, len = view.length; i < len; i += chunkSize) {\n                chunks.push(String.fromCharCode.apply(String, view.subarray(i, Math.min(i + chunkSize, len))));\n            }\n            return chunks.join('');\n        };\n        VPLUtil.String2ArrayBuffer = function(data) {\n            var len = data.length;\n            var ret = new ArrayBuffer(len);\n            var u8 = new Uint8Array(ret);\n            for (var i = 0; i < len; i++) {\n                u8[i] = data.charCodeAt(i);\n            }\n            return ret;\n        };\n\n        (function() {\n            var fileUniqueId = 0;\n            VPLUtil.getUniqueId = function() {\n                return fileUniqueId++;\n            };\n        })();\n        (function() {\n            var regExt = /\\.([^.]*)$/;\n            var regImg = /^(gif|jpg|jpeg|png|ico)$/i;\n            var regBin = /^(zip|jar|pdf|tar|bin|7z|arj|deb|gzip|rar|rpm|dat|db|dll|rtf|doc|docx|odt|exe|com)$/i;\n            var regBlk = /^blockly[0123]?$/;\n            VPLUtil.fileExtension = function(fileName) {\n                var res = regExt.exec(fileName);\n                return res !== null ? res[1] : '';\n            };\n            VPLUtil.isImage = function(fileName) {\n                return regImg.test(VPLUtil.fileExtension(fileName));\n            };\n            VPLUtil.isBinary = function(fileName) {\n                return VPLUtil.isImage(fileName) || regBin.test(VPLUtil.fileExtension(fileName));\n            };\n            VPLUtil.isBlockly = function(fileName) {\n                return regBlk.test(VPLUtil.fileExtension(fileName));\n            };\n            var regInvalidFileName = /[\\cA-\\cZ]|[:-@]|[{-~]|\\\\|\\[|\\]|[/^`´]|^-|^ | $|\\.\\./;\n            VPLUtil.validFileName = function(fileName) {\n                if (fileName.length < 1) {\n                    return false;\n                }\n                if (fileName.length > 128) {\n                    return false;\n                }\n                return !(regInvalidFileName.test(fileName));\n            };\n        })();\n        VPLUtil.getCurrentTime = function() {\n            return parseInt((new Date()).valueOf() / 1000);\n        };\n        VPLUtil.encodeBinary = function(name, data) {\n            if (!VPLUtil.isBinary(name)) {\n                return btoa(unescape(encodeURIComponent(data)));\n            }\n            return btoa(VPLUtil.ArrayBuffer2String(data));\n        };\n\n        VPLUtil.decodeBinary = function(name, data) {\n            var decoded = atob(data);\n            if (!VPLUtil.isBinary(name)) {\n                return decodeURIComponent(escape(decoded));\n            }\n            return VPLUtil.String2ArrayBuffer(decoded);\n        };\n\n        VPLUtil.validPath = function(path) {\n            if (path.length > 256) {\n                return false;\n            }\n            var dirs = path.split(\"/\");\n            for (var i = 0; i < dirs.length; i++) {\n                if (!VPLUtil.validFileName(dirs[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        VPLUtil.getFileName = function(path) {\n            var dirs = path.split(\"/\");\n            return dirs[dirs.length - 1];\n        };\n        VPLUtil.dataFromURLData = function(data) {\n            return data.substr(data.indexOf(',') + 1);\n        };\n        VPLUtil.readZipFile = function(data, save, progressBar, end) {\n            if (!end) {\n                end = VPLUtil.doNothing;\n            }\n            if (typeof JUnzip == 'undefined') {\n                VPLUtil.loadScript(['../editor/zip/inflate.js',\n                    '../editor/zip/unzip.js']\n                , function() {\n                    VPLUtil.readZipFile(data, save, progressBar, end);\n                });\n                return;\n            }\n            var ab = VPLUtil.ArrayBuffer2String(data);\n            var unzipper = new JUnzip(ab);\n            if (!unzipper.isZipFile()) {\n                VPLUtil.log('Not a ZIP file');\n                end();\n                return;\n            }\n            unzipper.readEntries();\n            var out = unzipper.entries.length;\n            /**\n             * Process each entry in the zip file.\n             * Recursive process.\n             * @param {int} i Entry to process.\n             */\n            function process(i) {\n                if (i >= out || progressBar.isClosed()) {\n                    end();\n                    return;\n                }\n                var entry = unzipper.entries[i];\n                var fileName = entry.fileName;\n                var data;\n                // Is directory entry then skip.\n                if (fileName.match(/\\/$/)) {\n                    process(i + 1);\n                } else {\n                    progressBar.processFile(fileName);\n                    var uncompressed = '';\n                    if (entry.compressionMethod === 0) {\n                        // Plain file.\n                        uncompressed = entry.data;\n                    } else if (entry.compressionMethod === 8) {\n                        uncompressed = JSInflate.inflate(entry.data);\n                    }\n                    if (VPLUtil.isBinary(fileName)) {\n                        // If binary use as arrayBuffer.\n                        save({name: fileName, contents: btoa(uncompressed), encoding: 1});\n                        // TODO Show message when error.\n                        process(i + 1);\n                    } else {\n                        data = VPLUtil.String2ArrayBuffer(uncompressed);\n                        var blob = new Blob([data], {\n                            type: 'text/plain'\n                        });\n                        var fr = new FileReader();\n                        fr.onload = function(e) {\n                            save({name: fileName, contents: e.target.result, encoding: 0});\n                            process(i + 1);\n                        };\n                        fr.onerror = function(e) {\n                            VPLUtil.log(e);\n                            i = out;\n                            process(i + 1);\n                            // TODO Show message when error.\n                        };\n                        fr.readAsText(blob);\n                    }\n                }\n            }\n            process(0);\n        };\n\n        VPLUtil.readSelectedFiles = function(filesToRead, save, end) {\n            // Process all File objects.\n            var pb = new VPLUtil.progressBar('import', 'import');\n            var errorsMessages = '';\n            if (!end) {\n                end = VPLUtil.doNothing;\n            }\n            pb.processFile = function(name) {\n                pb.setLabel(name);\n            };\n            /**\n             * Read each file in filesToReas\n             * Recursive process.\n             * @param {int} sec secuencial file to read\n             */\n            function readSecuencial(sec) {\n                if (sec >= filesToRead.length || pb.isClosed()) {\n                    end();\n                    pb.close();\n                    if (errorsMessages > '') {\n                        VPLUtil.showErrorMessage(errorsMessages);\n                    }\n                    return;\n                }\n                var f = filesToRead[sec];\n                pb.processFile(f.name);\n                var binary = VPLUtil.isBinary(f.name);\n                var reader = new FileReader();\n                var ext = VPLUtil.fileExtension(f.name).toLowerCase();\n                reader.onload = function(e) {\n                    if (binary) {\n                        if (ext == 'zip') {\n                            try {\n                                VPLUtil.readZipFile(e.target.result, save, pb, function() {\n                                                                                  readSecuencial(sec + 1);\n                                                                               });\n                                return;\n                            } catch (ex) {\n                                VPLUtil.showErrorMessage(ex + \" : \" + f.name);\n                            }\n                        } else {\n                            var data = VPLUtil.dataFromURLData(e.target.result);\n                            save({name: f.name, contents: data, encoding: 1});\n                        }\n                    } else {\n                        save({name: f.name, contents: e.target.result, encoding: 0});\n                    }\n                    readSecuencial(sec + 1);\n                };\n                reader.onerror = function(e) {\n                    errorsMessages += \"Error \\\"\" + e.target.error + \"\\\" reading \" + f.name + \"\\n\";\n                    readSecuencial(sec + 1);\n                };\n                if (binary) {\n                    if (ext == 'zip') {\n                        reader.readAsArrayBuffer(f);\n                    } else {\n                        reader.readAsDataURL(f);\n                    }\n                } else {\n                    reader.readAsText(f);\n                }\n            }\n            readSecuencial(0);\n        };\n        (function() {\n            var MIME = {\n                'gif': 'image/gif',\n                'jpg': 'image/jpeg',\n                'jpeg': 'image/jpeg',\n                'png': 'image/png',\n                'ico': 'image/vnd.microsoft.icon',\n                'pdf': 'application/pdf'\n            };\n            VPLUtil.getMIME = function(fileName) {\n                var ext = VPLUtil.fileExtension(fileName);\n                if (ext in MIME) {\n                    return MIME[ext];\n                }\n                return 'application/octet-stream';\n            };\n            VPLUtil.getTimeLeft = function(timeLeft) {\n                var res = '';\n                var minute = 60;\n                var hour = 60 * minute;\n                var day = 24 * hour;\n                if (timeLeft < 0) {\n                    res += '-';\n                    timeLeft = -timeLeft;\n                }\n                var timePending = timeLeft;\n                var days = parseInt(timePending / day);\n                timePending -= days * day;\n                if (days !== 0) {\n                    res += days + 'T';\n                }\n                var hours = parseInt(timePending / hour);\n                timePending -= hours * hour;\n                var minutes = parseInt(timePending / minute);\n                timePending -= minutes * minute;\n                var seconds = parseInt(timePending);\n                res += ('00' + hours).substr(-2) + ':';\n                res += ('00' + minutes).substr(-2);\n                if (timeLeft < hour) {\n                    res += ':' + ('00' + seconds).substr(-2);\n                }\n                return res;\n            };\n        })();\n        (function() {\n            var maplang = {\n                'abap': 'abap',\n                'abc': 'abc',\n                'ada': 'ada', 'ads': 'ada', 'adb': 'ada',\n                'as': 'actionscript', 'as3': 'actionscript',\n                'asm': 'assembly_x86',\n                'bash': 'sh',\n                'bat': 'batchfile',\n                'c': 'c_cpp', 'C': 'c_cpp', 'cc': 'c_cpp', 'cpp': 'c_cpp', 'c++': 'c_cpp',\n                'hxx': 'c_cpp', 'h': 'c_cpp', 'H': 'c_cpp',\n                'cases': 'cases',\n                'cbl': 'cobol', 'cob': 'cobol',\n                'coffee': 'coffee',\n                'clj': 'clojure',\n                'cs': 'csharp',\n                'css': 'css',\n                'd': 'd',\n                'dart': 'dart',\n                'e': 'eiffel',\n                'erl': 'erlang', 'hrl': 'erlang',\n                'f': 'fortran', 'f77': 'fortran', 'f90': 'fortran', 'for': 'fortran',\n                'go': 'golang',\n                'groovy': 'groovy',\n                'gv': 'dot',\n                'hs': 'haskell',\n                'htm': 'html', 'html': 'html',\n                'hx': 'haxe',\n                'java': 'java',\n                'jl': 'julia',\n                'js': 'javascript',\n                'json': 'json',\n                'jsp': 'jsp',\n                'jsx': 'jsx',\n                'kt': 'kotlin', 'kts': 'kotlin',\n                'm': 'matlab',\n                'md': 'markdown',\n                'less': 'less',\n                'lisp': 'lisp', 'lsp': 'lisp',\n                'lua': 'lua',\n                'pas': 'pascal', 'p': 'pascal',\n                'perl': 'perl', 'prl': 'perl',\n                'php': 'php',\n                'pro': 'prolog', 'pl': 'prolog',\n                'py': 'python',\n                'R': 'r', 'r': 'r',\n                'rb': 'ruby', 'ruby': 'ruby',\n                's': 'assembly_x86',\n                'sass': 'sass',\n                'scala': 'scala',\n                'scm': 'scheme',\n                'scss': 'scss',\n                'sh': 'sh',\n                'swift': 'swift',\n                'sql': 'sql',\n                'svg': 'svg',\n                'tex': 'tex',\n                'tcl': 'tcl',\n                'ts': 'typescript',\n                'twig': 'twig',\n                'vbs': 'vbscript',\n                'v': 'verilog', 'vh': 'verilog',\n                'vhd': 'vhdl', 'vhdl': 'vhdl',\n                'xml': 'xml',\n                'yaml': 'yaml'\n            };\n            VPLUtil.langType = function(ext) {\n                if (ext in maplang) {\n                    return maplang[ext];\n                }\n                return 'plain_text';\n            };\n        })();\n        (function() {\n            var i18n = {};\n            var strreg = /\\{\\\\*\\$a\\\\*}/g;\n            VPLUtil.str = function(key, parm) {\n                if (!i18n[key]) {\n                    return '{' + key + '}';\n                }\n                if (typeof parm != 'undefined') {\n                    return i18n[key].replace(strreg, parm);\n                } else {\n                    return i18n[key];\n                }\n            };\n            VPLUtil.setStr = function(newi18n) {\n                for (var key in newi18n) {\n                    if (newi18n.hasOwnProperty(key)) {\n                        i18n[key] = newi18n[key];\n                    }\n                }\n                VPLUtil.dialogbaseOptions = {\n                    minWidth: 200,\n                    autoOpen: false,\n                    width: 'auto',\n                    closeText: VPLUtil.str('cancel'),\n                    modal: true,\n                    dialogClass: 'vpl_ide vpl_ide_dialog'\n                };\n            };\n            VPLUtil.setStr(window.VPLi18n);\n        })();\n        (function() {\n            var delayedActions = {};\n            var afterAllActions = {};\n            var shortTimeout = 20;\n            var longTimeout = 100;\n            var numberDelayed = 0;\n            VPLUtil.delay = function(id, func, arg1, arg2) {\n                if (typeof delayedActions[id] != 'undefined') {\n                    clearTimeout(delayedActions[id]);\n                    numberDelayed--;\n                }\n                numberDelayed++;\n                delayedActions[id] = setTimeout(function() {\n                    numberDelayed--;\n                    func(arg1, arg2);\n                    delete delayedActions[id];\n                }, shortTimeout);\n            };\n            VPLUtil.longDelay = function(id, func, arg1, arg2) {\n                if (typeof delayedActions[id] != 'undefined') {\n                    clearTimeout(delayedActions[id]);\n                    numberDelayed--;\n                }\n                numberDelayed++;\n                delayedActions[id] = setTimeout(function() {\n                    numberDelayed--;\n                    func(arg1, arg2);\n                    delete delayedActions[id];\n                }, longTimeout);\n            };\n            var setAfterTimeout = function(id, func, arg1, arg2) {\n                if (typeof afterAllActions[id] != 'undefined') {\n                    clearTimeout(afterAllActions[id]);\n                }\n                return setTimeout(function() {\n                        if (numberDelayed > 0) {\n                            afterAllActions[id] = setAfterTimeout(id, func, arg1, arg2);\n                        } else {\n                             func(arg1, arg2);\n                             delete afterAllActions[id];\n                        }\n                    }, longTimeout);\n            };\n            VPLUtil.afterAll = function(id, func, arg1, arg2) {\n                afterAllActions[id] = setAfterTimeout(id, func, arg1, arg2);\n            };\n        })();\n        VPLUtil.iconModified = function() {\n            var html = '<span title=\"' + VPLUtil.str('modified') + '\" class=\"vpl_ide_charicon\">';\n            html += '<i class=\"fa fa-star\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUtil.iconDelete = function() {\n            var html = ' <span title=\"' + VPLUtil.str('delete') + '\" class=\"vpl_ide_charicon vpl_ide_delicon\">';\n            html += '<i class=\"fa fa-trash\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUtil.iconClose = function() {\n            var html = ' <span title=\"' + VPLUtil.str('closebuttontitle');\n            html += '\" class=\"vpl_ide_charicon vpl_ide_closeicon\">' + '<i class=\"fa fa-remove\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUtil.iconRequired = function() {\n            var html = ' <span title=\"' + VPLUtil.str('required') + '\" class=\"vpl_ide_charicon\">';\n            html += '<i class=\"fa fa-shield\"></i>' + '</span> ';\n            return html;\n        };\n        VPLUtil.iconFolder = function() {\n            return '<i class=\"fa fa-folder-open-o\"></i>';\n        };\n        (function() {\n            var menuIcons = {\n                'filelist': 'folder-open-o',\n                'filelistclose': 'folder-o',\n                'new': 'file-code-o',\n                'rename': 'pencil',\n                'delete': 'trash',\n                'multidelete': 'trash|list',\n                'close': 'remove',\n                'comments': 'commenting',\n                'import': 'upload',\n                'print': 'print',\n                'edit': 'edit',\n                'undo': 'undo',\n                'redo': 'repeat',\n                'select_all': 'location-arrow',\n                'find': 'search',\n                'find_replace': 'exchange',\n                'next': 'search-plus',\n                'resetfiles': 'refresh',\n                'download': 'download',\n                'fullscreen': 'expand',\n                'regularscreen': 'compress',\n                'save': 'save',\n                'shortcuts': 'flash',\n                'sort': 'list-ol',\n                'run': 'rocket',\n                'running': 'rocket fa-spin',\n                'debug': 'bug',\n                'evaluate': 'check-square-o',\n                'console': 'terminal',\n                'about': 'question',\n                'info': 'info-circle',\n                'alert': 'warning',\n                'trash': 'trash',\n                'retrieve': 'download',\n                'spinner': 'refresh fa-spin',\n                'keyboard': 'keyboard-o',\n                'clipboard': 'clipboard',\n                'timeleft': 'clock-o',\n                'copy': 'copy',\n                'paste': 'paste',\n                'more': 'plus-square',\n                'less': 'minus-square',\n                'resize': 'arrows-alt',\n                'graphic': 'picture-o',\n                'send': 'send',\n                'theme':  'paint-brush',\n                'user': 'user',\n                'fontsize': 'text-height',\n                'close-rightpanel': 'caret-square-o-right',\n                'open-rightpanel': 'caret-square-o-left'\n            };\n            VPLUtil.genIcon = function(icon, size) {\n                if (!menuIcons[icon]) {\n                    return '';\n                }\n                var classes = 'fa fa-';\n                if (!size) {\n                    classes += 'lg';\n                } else {\n                    classes += size;\n                }\n                var icons = menuIcons[icon].split('|');\n                var ret = '';\n                for (var i = 0; i < icons.length; i++) {\n                    ret += \"<i class='\" + classes + ' fa-' + icons[i] + \"'></i>\";\n                }\n                return ret;\n            };\n        })();\n        // UI operations.\n        VPLUtil.setTitleBar = function(dialog, type, icon, buttons, handler) {\n            var title = $(dialog).parent().find(\"span.ui-dialog-title\");\n            /**\n             * Generate HTML for a button with icon\n             * @param {string} e name of botton.\n             * @returns {string} Html tag <a> as a button.\n             */\n            function genButton(e) {\n                var html = \"<a id='vpl_\" + type + \"_\" + e + \"' href='#' title='\" + VPLUtil.str(e) + \"'>\";\n                html += VPLUtil.genIcon(e, 'fw') + \"</a>\";\n                return html;\n            }\n            var html = VPLUtil.genIcon(icon);\n            html += \" <span class='\" + type + \"-title-buttons'></span>\";\n            html += \"<span class='\" + type + \"-title-text'></span>\";\n            title.html(html);\n            var titleButtons = title.find(\"span.\" + type + \"-title-buttons\");\n            var titleText = title.find(\"span.\" + type + \"-title-text\");\n            html = \"\";\n            for (var i = 0; i < buttons.length; i++) {\n                html += genButton(buttons[i]);\n            }\n            titleButtons.html(html);\n            for (var ih = 0; ih < handler.length; ih++) {\n                var button = title.find('#vpl_' + type + '_' + buttons[ih]);\n                button.button().click(handler[ih]);\n                button.css('padding', '1px 3px');\n            }\n            titleButtons.on('focus', '*', function() {\n                                              $(this).blur();\n                                          });\n            return titleText;\n        };\n        VPLUtil.setDialogTitleIcon = function(dialog, icon) {\n            var title = $(dialog).parent().find(\"span.ui-dialog-title\");\n            title.html(VPLUtil.genIcon(icon) + ' ' + title.html());\n        };\n        VPLUtil.progressBar = function(title, message, onUserClose) {\n            var labelHTML = '<span class=\"vpl_ide_progressbarlabel\"></span>';\n            var sppiner = '<div class=\"vpl_ide_progressbaricon\">' + VPLUtil.genIcon('spinner') + '</div>';\n            var pbHTML = ' <div class=\"vpl_ide_progressbar\">' + sppiner + labelHTML + '</div>';\n            var HTML = '<div class=\"vpl_ide_dialog\" style=\"display:none;\">' + pbHTML + '</div>';\n            var dialog = $(HTML);\n            $('body').append(dialog);\n            var progressbar = dialog.find('.vpl_ide_progressbar');\n            var label = progressbar.find('.vpl_ide_progressbarlabel');\n            dialog.dialog({\n                'title': VPLUtil.str(title),\n                resizable: false,\n                autoOpen: false,\n                width: 200,\n                height: 20,\n                minHeight: 20,\n                modal: true,\n                dialogClass: 'vpl_ide vpl_ide_dialog',\n                close: function(event) {\n                    if (dialog) {\n                        if (onUserClose && event.originalEvent) {\n                            onUserClose();\n                        }\n                        onUserClose = false;\n                    }\n                }\n            });\n            this.setLabel = function(t, icon) {\n                if (dialog) {\n                    label.text(t);\n                    if (icon) {\n                        label.html(VPLUtil.genIcon(icon) + ' ' + label.html());\n                    }\n                }\n            };\n            this.close = function() {\n                if (dialog) {\n                    dialog.dialog('destroy');\n                    $(dialog).remove();\n                    dialog = false;\n                }\n            };\n            this.isClosed = function() {\n                return dialog === false;\n            };\n            var titleTag = dialog.siblings().find('.ui-dialog-title');\n            titleTag.html(VPLUtil.genIcon(title) + ' ' + titleTag.html());\n            this.setLabel(VPLUtil.str(message));\n            dialog.dialog('open');\n            dialog.dialog('option', 'height', 'auto');\n        };\n        /**\n         * Shows a dialog with a message.\n         * @param {string} message\n         * @param {Object} initialoptions icon, title, actions handler (ok, yes, no, close)\n         * @returns {JQuery} JQueryUI Dialog object already open\n         */\n        VPLUtil.showMessage = function(message, initialoptions) {\n            var options = $.extend({}, VPLUtil.dialogbaseOptions, initialoptions);\n            var messageDialog = $('<div class=\"vpl_ide_dialog\" style=\"display:none\"></div>');\n            var icon = '';\n            var contents = ' <span class=\"dmessage\">' + message.replace(/\\n/g, '<br>') + '</span>';\n            messageDialog.html(contents);\n            if (typeof options.icon == 'undefined') {\n                icon = 'info';\n            } else {\n                icon = options.icon;\n                delete options.icon;\n            }\n            if (!options.title) {\n                options.title = VPLUtil.str('warning');\n            }\n            $('body').append(messageDialog);\n            var messageButtons = {};\n            if (typeof initialoptions.ok == 'function') {\n                messageButtons[VPLUtil.str('ok')] = function() {\n                    $(this).dialog('close');\n                    initialoptions.ok();\n                };\n                messageButtons[VPLUtil.str('cancel')] = function() {\n                    $(this).dialog('close');\n                };\n                delete options.ok;\n            } else if (typeof initialoptions.yes == 'function') {\n                messageButtons[VPLUtil.str('yes')] = function() {\n                    $(this).dialog('close');\n                    initialoptions.yes();\n                };\n                messageButtons[VPLUtil.str('no')] = function() {\n                    $(this).dialog('close');\n                };\n                delete options.yes;\n            } else {\n                messageButtons[VPLUtil.str('close')] = function() {\n                    $(this).dialog('close');\n                };\n            }\n            if (options.next) {\n                messageButtons[VPLUtil.str('next')] = function() {\n                    $(this).dialog('close');\n                    initialoptions.next();\n                };\n            }\n            options.close = function() {\n                    $(this).remove();\n                    if (initialoptions.close) {\n                        initialoptions.close();\n                    }\n            };\n            options.buttons = messageButtons;\n\n            messageDialog.dialog(options);\n            var titleTag = messageDialog.siblings().find('.ui-dialog-title');\n            titleTag.html(VPLUtil.genIcon(icon) + ' ' + titleTag.html());\n\n            messageDialog.setMessage = function(men) {\n                $(messageDialog).find('.dmessage').html(men.replace(/\\n/g, '<br>'));\n            };\n\n            messageDialog.dialog('open');\n            return messageDialog;\n        };\n        VPLUtil.showErrorMessage = function(message, options) {\n            var currentOptions = $.extend({}, VPLUtil.dialogbaseOptions, {\n                title: VPLUtil.str('error'),\n                icon: 'alert'\n            });\n            if (options) {\n                currentOptions = $.extend(currentOptions, options);\n            }\n            return VPLUtil.showMessage(message, currentOptions);\n        };\n        /**\n         * Request an action to de server: save, run, debug, evaluate, update, getresult, etc.\n         * @param {string} action Name of action to request.\n         * @param {string} title The title that shows the progress dialog\n         * @param {object} data Data to send to the server\n         * @param {string} URL URL to the server entry point, lacking action\n         * @param {boolean} noDialog If true then no dialog is shown\n         * @returns {deferred} Defferred object\n         */\n        VPLUtil.requestAction = function(action, title, data, URL, noDialog) {\n            var deferred = $.Deferred();\n            var request = null;\n            var xhr = false;\n            var apb = false;\n            if (!noDialog) {\n                if (title === '') {\n                    title = 'connecting';\n                }\n                apb = new VPLUtil.progressBar(action, title, function() {\n                    if (request.readyState != 4) {\n                        if (xhr && xhr.abort) {\n                            xhr.abort();\n                        }\n                    }\n                });\n            }\n            request = $.ajax({\n                beforeSend: function(jqXHR) {\n                    xhr = jqXHR;\n                    return true;\n                },\n                async: true,\n                type: \"POST\",\n                url: URL + action,\n                'data': JSON.stringify(data),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\"\n            }).always(function() {\n                if (!noDialog) {\n                    apb.close();\n                }\n            }).done(function(response) {\n                if (!response.success) {\n                    deferred.reject(response.error);\n                } else {\n                    deferred.resolve(response.response);\n                }\n            }).fail(function(jqXHR, textStatus, errorThrown) {\n                var message = VPLUtil.str('connection_fail') + ': ' + textStatus;\n                if (debugMode && errorThrown.message != undefined) {\n                    message += ': ' + errorThrown.message;\n                }\n                VPLUtil.log(message);\n                deferred.reject(message);\n            });\n            return deferred;\n        };\n        VPLUtil.supportWebSocket = function() {\n            if (\"WebSocket\" in window) {\n                return true;\n            }\n            return false;\n        };\n        VPLUtil.isAndroid = function() {\n            return window.navigator.userAgent.indexOf('Android') > -1;\n        };\n        VPLUtil.isFirefox = function() {\n            return window.navigator.userAgent.indexOf('Firefox') > -1;\n        };\n        VPLUtil.isMac = function() {\n            return window.navigator.userAgent.indexOf('Mac') > -1;\n        };\n        VPLUtil.clickServer = function(e) {\n            var w = 550;\n            var h = 450;\n            var left = (screen.width / 2) - (w / 2);\n            var top = (screen.height / 2) - (h / 2);\n            try {\n                var features = 'toolbar=no, location=no, directories=no, status=no, menubar=no';\n                features += ', resizable=yes, scrollbars=yes, copyhistory=no, width=' + w;\n                features += ', height=' + h + ', top=' + top + ', left=' + left;\n                var win = window.open($(this).attr('href'), '_blank', features);\n                if (!win) {\n                    return true;\n                }\n            } catch (ex) {\n                VPLUtil.log(ex);\n                return true;\n            }\n            e.preventDefault();\n            $(this).parent().hide();\n            return false;\n        };\n\n        VPLUtil.acceptCertificates = function(servers, getLastAction) {\n            if (servers.length > 0) {\n                // Generate links dialog.\n                var html = VPLUtil.str('acceptcertificatesnote');\n                html += '<ol>';\n                var i;\n                for (i in servers) {\n                    if (servers.hasOwnProperty(i)) {\n                        var n = 1 + i;\n                        html += '<li><a href=\"' + servers[i] + '\" target=\"_blank\">Server ';\n                        html += n + '</a></li>';\n                    }\n                }\n                html += '</ol>';\n                var m = VPLUtil.showMessage(html, {\n                    ok: function() {\n                        var action = getLastAction();\n                        if (action) {\n                            action();\n                        }\n                    },\n                    icon: 'unlocked',\n                    title: VPLUtil.str('acceptcertificates')\n                });\n                $(m).find('a').on('click keypress', VPLUtil.clickServer);\n            } else {\n                VPLUtil.log('servers.length == 0');\n                VPLUtil.showErrorMessage(VPLUtil.str('connection_fail'));\n            }\n        };\n        VPLUtil.monitorRunning = VPLUtil.returnFalse;\n        (function() {\n            var lastProccessID = -1;\n            VPLUtil.setProcessId = function(id) {\n                lastProccessID = id;\n            };\n            VPLUtil.getProcessId = function() {\n                return lastProccessID;\n            };\n        })();\n        VPLUtil.webSocketMonitor = function(coninfo, title, running, externalActions) {\n            VPLUtil.setProtocol(coninfo);\n            VPLUtil.setProcessId(coninfo.processid);\n            var ws = null;\n            var pb = null;\n            var deferred = $.Deferred();\n            var defail = function(m) {\n                deferred.reject(m);\n            };\n            var delegated = false;\n            var messageActions = {\n                'message': function(content) {\n                    var parsed = /^([^:]*):?([^]*)/.exec(content);\n                    var state = parsed[1];\n                    var detail = parsed[2];\n                    if (state == 'running') {\n                        state = running;\n                    }\n                    var text = VPLUtil.str(state);\n                    if (detail > '') {\n                        text += ': ' + detail;\n                    }\n                    if (pb !== null && !pb.isClosed()) {\n                        pb.setLabel(text);\n                    } else if (externalActions.getConsole && externalActions.getConsole().isOpen()) {\n                        externalActions.getConsole().setMessage(text);\n                    } else {\n                        VPLUtil.log('Error: no dialogo. Message not shown: ' + text);\n                    }\n                },\n                'compilation': function(content) {\n                    if (externalActions.setResult) {\n                        externalActions.setResult({\n                            'compilation': content,\n                        }, false);\n                    }\n                },\n                'retrieve': function() {\n                    var data = {\"processid\": VPLUtil.getProcessId()};\n                    pb.close();\n                    delegated = true;\n                    VPLUtil.requestAction('retrieve', '', data, externalActions.ajaxurl)\n                    .done(\n                        function(response) {\n                            deferred.resolve();\n                            if (externalActions.setResult) {\n                                externalActions.setResult(response, true);\n                            }\n                        }\n                   ).fail(defail);\n                },\n                'run': function(content) {\n                    pb.close();\n                    externalActions.run(content, coninfo, ws);\n                },\n                'close': function() {\n                    VPLUtil.log('ws close message from jail');\n                    ws.close();\n                    var data = {\"processid\": VPLUtil.getProcessId()};\n                    VPLUtil.requestAction('cancel', '', data, externalActions.ajaxurl, true);\n                }\n            };\n            try {\n                if (VPLUtil.supportWebSocket()) {\n                    ws = new WebSocket(coninfo.monitorURL);\n                } else {\n                    VPLUtil.log('ws not available');\n                    deferred.reject(VPLUtil.str('browserupdate'));\n                    return deferred;\n                }\n            } catch (e) {\n                VPLUtil.log('ws new say ' + e);\n                deferred.reject(e.message);\n                return deferred;\n            }\n            pb = new VPLUtil.progressBar(title, 'connecting', function() {\n                deferred.reject('Stopped by user');\n                ws.close();\n            });\n            ws.notOpen = true;\n            ws.onopen = function() {\n                ws.notOpen = false;\n                pb.setLabel(VPLUtil.str('connected'));\n                if (externalActions.open) {\n                    externalActions.open();\n                }\n            };\n            ws.onerror = function(event) {\n                VPLUtil.log('ws error ' + event);\n                pb.close();\n                if (coninfo.secure && ws.notOpen) {\n                    VPLUtil.requestAction('getjails', 'retrieve', {}, externalActions.ajaxurl)\n                    .done(function(response) {\n                        VPLUtil.acceptCertificates(response.servers, function() {\n                            return externalActions.getLastAction();\n                        });\n                    })\n                    .fail(defail);\n                } else {\n                    deferred.reject(VPLUtil.str('connection_fail'));\n                }\n                if (externalActions.close) {\n                    VPLUtil.delay('externalActions.close', externalActions.close);\n                }\n            };\n            ws.onclose = function() {\n                if (externalActions.getConsole) {\n                    externalActions.getConsole().disconnect();\n                }\n                if (!ws.notOpen) {\n                    pb.close();\n                    if (!delegated && deferred.state() != 'rejected') {\n                        deferred.resolve();\n                    }\n                }\n                if (externalActions.close) {\n                    externalActions.close();\n                }\n            };\n\n            ws.onmessage = function(event) {\n                var message = /^([^:]+):([^]*)/.exec(event.data);\n                if (message !== null) {\n                    var action = message[1];\n                    var content = message[2];\n                    if (messageActions[action]) {\n                        messageActions[action](content);\n                    }\n                } else {\n                    pb.setLabel(VPLUtil.str('error') + ': ' + event.data);\n                }\n            };\n            VPLUtil.monitorRunning = function() {\n                return ws !== null && ws.readyState != WebSocket.CLOSED;\n            };\n            return deferred;\n        };\n\n        /**\n         * Run a command in a execution server with input/output using a WebSocket\n         * @param {string} URL to VPL editor services in Moodle server\n         * @param {string} command Command to run in execution server\n         * @param {array.<{name: string, contents: string, encoding: number}>} files\n         *         array of objects name, contents and encoding 0 => UTF-8, 1 => Base64\n         * @returns {object} deferred.\n         *         Use done() to set handler to receive the WebSocket. Use fail to set error handler.\n         */\n        VPLUtil.directRun = function(URL, command, files) {\n            var deferred = $.Deferred();\n            $.ajax({\n                async: true,\n                type: \"POST\",\n                url: URL + 'directrun',\n                'data': JSON.stringify({\"command\": command, \"files\": files}),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: \"json\"\n            }).done(function(result) {\n                if (!result.success) {\n                    deferred.reject(result.error);\n                } else {\n                    var response = result.response;\n                    VPLUtil.setProtocol(response);\n                    var ws = new WebSocket(response.executionURL);\n                    log.debug('Conecting with:' + response.executionURL);\n                    deferred.resolve({processid: response.processid, homepath: response.homepath, connection: ws});\n                }\n            }).fail(function(jqXHR, textStatus, errorThrown) {\n                var message = 'Connection fail' + ': ' + textStatus;\n                if (errorThrown.message != undefined) {\n                    message += ': ' + errorThrown.message;\n                }\n                log.debug(message);\n                deferred.reject(message);\n            });\n            return deferred;\n        };\n        /**\n         * Function to experiment with Direct run.\n         * Limits: one data send and 10 messages received and 10 minutes connected\n         * @param {string} URL to server\n         * @param {string} command Command to prepare direct run. Execution of command must generate vpl_execution\n         * @param {object} data to send to server\n         */\n         VPLUtil.directRunTest = function(URL, command, data) {\n            var files = [{name: 'a.c', contents: 'int main(){return 0;}', encoding: 0},\n                         {name: 'b.c', contents: 'int f(){return 1;}', encoding: 0}];\n            VPLUtil.directRun(URL, command, files)\n                .done(function(result) {\n                    var mcount = 0;\n                    result.connection.onopen = function() {\n                        log.debug(\"Ws open \" + result.homepath + \" processid \" + result.processid);\n                        if (data != undefined) {\n                            result.connection.send(data);\n                        }\n                        setTimeout(function() { //  Close test if open for more than 10 minutes.\n                            result.connection.close();\n                        }, 60 * 10 * 1000);\n                    };\n                    result.connection.onmessage = function(event) {\n                        log.debug(\"WS Message (\" + ++mcount + \"): \" + event.data);\n                        if (mcount >= 10) {\n                            result.connection.close();\n                        }\n                    };\n                    result.connection.onerror = function(event) {\n                        log.debug(\"WS error: \" + event);\n                    };\n                    result.connection.onclose = function(event) {\n                        log.debug(\"WS close: \" + event.code + \" \" + event.reason);\n                    };\n                })\n                .fail(function(message) {\n                    log.debug(\"Direct run fail. URL: \" + URL + \" command: \" + command + \" message: \" + message);\n                });\n        };\n        VPLUtil.processResult = function(text, filenames, sh, noFormat, folding) {\n            if (typeof text == 'undefined' || text.replace(/^\\s+$/gm, '') == '') {\n                return '';\n            }\n            /**\n             * Adds escape to the text\n             * @param {string} t text to escape\n             * @returns {string} result\n             */\n            function escReg(t) {\n                return t.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/, \"\\\\$&\");\n            }\n            var regClassList = [\n                {\n                    regex: /^<title>.*/,\n                    type: \"title\",\n                    class: \"ace_identifier vpl_widget_header\"\n                },\n                {\n                    regex: /^<subTitle>.*/,\n                    type: \"subTitle\",\n                    class: \"ace_identifier sub_vpl_widget_header\"\n                },\n                {\n                    regex: /^<subSubTitle>.*/,\n                    type: \"subSubTitle\",\n                    class: \"ace_identifier sub_sub_vpl_widget_header\"\n                },\n                {\n                    regex: /^<comment>.*/,\n                    type: \"comment\",\n                    class: \"ace_comment vpl_evaluate_result\"\n                },\n                {\n                    regex: /^<testCase>.*/,\n                    type: \"testCase\",\n                    class: \"ace_identifier vpl_evaluate_result\"\n                },\n                {\n                    regex: /^<case>.*/,\n                    type: \"case\",\n                    class: \"ace_identifier vpl_evaluate_result\"\n                },\n                {\n                    regex: /^<caseEnhanced>.*/,\n                    type: \"caseEnhanced\",\n                    class: \"ace_string vpl_evaluate_result vpl_enhanced_result\"\n                }\n            ];\n            var regCaseOriginal = {\n                regex: /<caseOriginal>.*/,\n                class: \"ace_tooltip\"\n            };\n            // TODO adds error? use first anotation for icon.\n            var regError = new RegExp('\\\\[err\\\\]|error|' + escReg(VPLUtil.str('error')), 'i');\n            var regWarning = new RegExp('\\\\[warn\\\\]|warning|note|' + escReg(VPLUtil.str('warning')), 'i');\n            var regInformation = new RegExp('\\\\[info\\\\]|information', 'i');\n            var html = '';\n            var lines = text.split(/\\r\\n|\\n|\\r/);\n            var regFiles = [];\n            var lastAnotation = false;\n            var lastAnotationFile = false;\n            var afterTitle = false;\n            /**\n             * Generate attribute href for the editor in sh\n             * @param {int} i Index of sh\n             * @return {strng} href\n             */\n            function getHref(i) {\n                if (typeof sh[i].getTagId === 'undefined') {\n                    return 'href=\"#\" ';\n                } else {\n                    return 'href=\"#' + sh[i].getTagId() + '\" ';\n                }\n            }\n            (function() {\n                for (var i = 0; i < filenames.length; i++) {\n                    var regf = escReg(filenames[i]);\n                    // Filename:N, filename(N), filename N, filename line N, filename on line N.\n                    // N=#|#:#|#,#.\n                    var reg = {\n                        \"en\": \"(^| |/)(\\\"|)\" + regf + \"(\\\"|)( on line |, line | line |:|\\\\()(\\\\d+)(:|,)?(\\\\d+)?(\\\\))?\",\n                        \"pt_br\": \"(^| |/)(\\\"|)\" + regf + \"(\\\"|)( na linha |, linha | linha |:|\\\\()(\\\\d+)(:|,)?(\\\\d+)?(\\\\))?\"\n                    };\n                    if (vpl_global_lang && typeof reg[vpl_global_lang] === \"string\"){\n                        regFiles[i] = new RegExp(reg[vpl_global_lang], 'm');\n                    } else {\n                        regFiles[i] = new RegExp(reg.en, 'm');\n                    }\n                }\n            })();\n            /**\n             * Generate the file links in the comments to point to the files\n             * @param {string} line Line to modify\n             * @param {string} rawline Text to include in annotation\n             * @returns {string} The line modified\n             */\n            function genFileLinks(line, rawline) {\n                var used = false;\n                for (var i = 0; i < regFiles.length; i++) {\n                    var reg = regFiles[i];\n                    var match;\n                    while ((match = reg.exec(line)) !== null) {\n                        var anot = sh[i].getAnnotations();\n                        // Annotation format {row:,column:,raw:,type:error,warning,info;text} .\n                        lastAnotationFile = i;\n                        used = true;\n                        var type;\n                        if (line.search(regError) > -1) {\n                            type = 'error';\n                        } else if (line.search(regWarning) > -1) {\n                            type = 'warning';\n                        } else if (line.search(regInformation) > -1) {\n                            type = 'info';\n                        } else {\n                            type = 'error';\n                        }\n                        lastAnotation = {\n                            'row': (parseInt(match[5]) - 1),\n                            'column': parseInt(match[7]),\n                            'type': type,\n                            'text': rawline,\n                        };\n                        anot.push(lastAnotation);\n                        var fileName = filenames[i];\n                        var href = getHref(i);\n                        var lt = VPLUtil.sanitizeText(fileName);\n                        var data = 'data-file=\"' + fileName + '\" data-line=\"' + parseInt(match[5]) + '\"';\n                        line = line.replace(reg, '<a ' + href + ' class=\"vpl_fl\" ' + data + '>' + lt + '$2$3$4$5$6</a>');\n                        line = line.substring(line.search('<a ' + href + ' class=\"vpl_fl\"'));\n                        line = line.substring(0, line.search('</a>') + 4);\n                        sh[i].setAnnotations(anot);\n                    }\n                }\n                if (!used && lastAnotation) {\n                    if (rawline !== '') {\n                        lastAnotation.text += \"\\n\" + rawline;\n                        sh[lastAnotationFile].setAnnotations(sh[lastAnotationFile].getAnnotations());\n                    } else {\n                        lastAnotation = false;\n                    }\n                }\n                return line;\n            }\n            /**\n             * Generates HTML for title line\n             * @param {string} line The line to process\n             * @returns {string} Line in HTML format\n             */\n            function getTitle(line) {\n                var html = '';\n                if (folding) {\n                    html += '<a href=\"javascript:void(0)\" onclick=\"VPLUtil.showHideDiv(this)\">[+]</a>';\n                }\n                html += '<div class=\"' + line.class + '\">' + VPLUtil.sanitizeText(line.line) + '</div>';\n                return html;\n            }\n            var linesFormat = [];\n            lines.forEach((line) => {\n                var match = regClassList.some((regClass)=>{\n                    if (regClass.regex.test(line)){\n                        linesFormat.push({\n                            line: line.replace(\"<\" + regClass.type + \">\", \"\"),\n                            type: regClass.type,\n                            class: regClass.class\n                        })\n                        return true;\n                    }\n                    return false;\n                });\n                if (!match){\n                    linesFormat.push(\n                        {\n                            line: line,\n                            type: \"\",\n                            class: \"\"\n                        }\n                    );\n                }\n            });\n            var spliceLines = [];\n            linesFormat.forEach((el, id, arr)=>{\n                if (el.type == \"caseEnhanced\"){\n                    var idSearch = id;\n                    while (idSearch + 1 < arr.length){\n                        if (regCaseOriginal.regex.exec(arr[idSearch].line)){\n                            break;\n                        }\n                        idSearch++;\n                    }\n                    if (idSearch < arr.length){\n                        spliceLines.push({\n                            beginId: id,\n                            endId: idSearch\n                        });\n                    }\n                }\n            });\n            var countLines = 0;\n            spliceLines.forEach((el)=>{\n                if (el.beginId < el.endId){\n                    var elementSpliced = linesFormat.splice(el.beginId - countLines, el.endId - el.beginId + 1);\n                    var insertElement = {\n                        type: elementSpliced[0].type,\n                        line: elementSpliced.map(info => info.line).join('<br>'),\n                        class: elementSpliced[0].class\n                    };\n                    linesFormat.splice(el.beginId - countLines, 0, insertElement);\n                    countLines = countLines + el.endId - el.beginId;\n                }\n            });\n            linesFormat = linesFormat.filter((el)=>{\n                return el.line !== \"\";\n            });\n            var caseGroup = {\n                loading: false,\n                buffer: ''\n            };\n            var idPop = 1;\n            linesFormat.forEach((line)=>{\n                if (noFormat) {\n                    html += genFileLinks(VPLUtil.sanitizeText(line), line) + \"\\n\";\n                    return;\n                }\n                switch(line.type){\n                    case \"title\":\n                        html += getTitle(line);\n                        break;\n                    case \"subTitle\":\n                        var sanitizedLine = VPLUtil.sanitizeText(line.line);\n                        html += '<div class=\"' + line.class + '\">' + sanitizedLine + '</div>';\n                        if (caseGroup.loading == true){\n                            caseGroup.loading = false;\n                            sanitizedLine = VPLUtil.sanitizeText(caseGroup.buffer);\n                            genFileLinks(sanitizedLine, caseGroup.buffer);\n                        } else {\n                            caseGroup.loading = true;\n                            caseGroup.buffer = '';\n                        }\n                        break;\n                    case \"caseEnhanced\":\n                        var end = regCaseOriginal.regex.exec(line.line);\n                        var tooltipHtml = ''\n                        if (end != null){\n                            line.line = line.line.substring(0, end.index);\n                            tooltipHtml = (\n                                `<div class=\"${regCaseOriginal.class}\" id=\"enhancedPop${idPop}\" style=\"display: none; left: 0px; top: 0px;\">` +\n                                end[0].substring(14, end[0].length) +\n                                '</div>'\n                            );\n                        }\n                        var splitBr = line.line.split('<br>');\n                        splitBr.forEach((str)=>{\n                            var sanitizedLine = VPLUtil.sanitizeText(str);\n                            html +=\n                                `<div class=\"${line.class}\"` +\n                                (end ? (\n                                    ` onmouseover=\"enhancedMouseOver(event, ${idPop})\"` +\n                                    ` onmousemove=\"enhancedMouseMove(event, ${idPop})\"` +\n                                    ` onmouseout=\"enhancedMouseOut(event, ${idPop})\"`)\n                                : '') +\n                                '>' +\n                                `${sanitizedLine}</div>` +\n                                tooltipHtml\n                            caseGroup.buffer += str + \"\\n\";\n                        });\n                        idPop++;\n                        break;\n                    case \"case\":\n                        caseGroup.buffer += line.line + \"\\n\";\n                    case \"caseTest\":\n                    default:\n                        var sanitizedLine = VPLUtil.sanitizeText(line.line);\n                        html += '<div class=\"' + line.class + '\">' + sanitizedLine + '</div>';\n                        break;\n                }\n            });\n            if (afterTitle) {\n                html += '</div>';\n            }\n            return html;\n        };\n        (function() {\n            var scriptsLoaded = [];\n            VPLUtil.loadScript = function(scripts, end) {\n                if (scripts.length == 0) {\n                    end();\n                    return;\n                }\n                var scriptURL = scripts[0];\n                if (typeof scriptsLoaded[scriptURL] == 'undefined') {\n                    scripts.shift();\n                    scriptsLoaded[scriptURL] = 1;\n                    var script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.src = VPLUtil.options.scriptPath + scriptURL;\n                    script.onload = function() {\n                        scriptsLoaded[scriptURL] = 2;\n                        VPLUtil.loadScript(scripts, end);\n                    };\n                    document.head.appendChild(script);\n                } else if (scriptsLoaded[scriptURL] == 2) {\n                    scripts.shift();\n                    VPLUtil.loadScript(scripts, end);\n                } else {\n                    VPLUtil.log('Error loading js ' + scriptURL + ' ' + scriptsLoaded[scriptURL]);\n                    setTimeout(function() {\n                                  VPLUtil.loadScript(scripts, end);\n                               }, 50);\n                }\n            };\n            VPLUtil.isScriptLoading = function(scriptURL) {\n                if (typeof scriptsLoaded[scriptURL] == 'undefined') {\n                    return false;\n                }\n                return scriptsLoaded[scriptURL] == 1;\n            };\n            VPLUtil.isScriptLoaded = function(scriptURL) {\n                if (typeof scriptsLoaded[scriptURL] == 'undefined') {\n                    return false;\n                }\n                return scriptsLoaded[scriptURL] == 2;\n            };\n        })();\n        VPLUtil.adjustBlockly = function(work, offx, offy) {\n            var blocks = work.getAllBlocks();\n            var miy = 20000;\n            var may = -20000;\n            var mix = 20000;\n            var max = -20000;\n            for (var i = 0; i < blocks.length; i++) {\n                var xy = blocks[i].getRelativeToSurfaceXY();\n                miy = Math.min(miy, xy.y);\n                may = Math.max(may, xy.y);\n                mix = Math.min(mix, xy.x);\n                max = Math.max(max, xy.x);\n            }\n            blocks = work.getTopBlocks();\n            for (var j = 0; j < blocks.length; j++) {\n                blocks[j].moveBy(offx - mix, offy - miy);\n            }\n            return may - miy + 100 + offy;\n        };\n        (function() {\n            var files = [];\n            var results = [];\n            var shs = [];\n            /**\n             * Constructor for submission highlighter\n             * @param {Array} files Files to show highlighted\n             * @param {Array} results Output\n             */\n            function SubmissionHighlighter(files, results) {\n                var self = this;\n                this.files = files;\n                this.results = results;\n                setTimeout(function() {\n                              self.highlight();\n                           }, 10);\n            }\n            SubmissionHighlighter.prototype.highlightBlockly = function(preid) {\n                VPLUtil.loadScript(['../editor/blockly/blockly_compressed.js',\n                    '../editor/blockly/msg/js/en.js',\n                    '../editor/blockly/blocks_compressed.js']\n                , function() {\n                    var tag = $('#' + preid);\n                    var c = tag.html();\n                    $('#' + preid + 'load').remove();\n                    tag.html('');\n                    tag.show();\n                    c = $('<div />').html(c).text().replace(/\\n/g, \"\");\n                    var xml = Blockly.Xml.textToDom(c);\n                    tag.html('').height(300).width(tag.parent().width());\n                    var options = {\n                        toolbox: '',\n                        readOnly: true,\n                        media: '../editor/blockly/media/',\n                    };\n                    var work = Blockly.inject(preid, options);\n                    Blockly.Xml.domToWorkspace(xml, work);\n                    var hg = VPLUtil.adjustBlockly(work, 10, 10);\n                    tag.height(hg);\n                    tag.width('100%');\n                    Blockly.svgResize(work);\n                    Blockly.resizeSvgContents(work);\n                    var h = tag.html();\n                    work.dispose();\n                    tag.html(h);\n                });\n            };\n            SubmissionHighlighter.prototype.highlight = function() {\n                var self = this;\n                var needAce = false;\n                var files = this.files;\n                for (let i = 0; i < files.length; i++) {\n                    let file = files[i];\n                    if (VPLUtil.isBinary(file.fileName) || VPLUtil.isBlockly(file.fileName)) {\n                        continue;\n                    } else {\n                        needAce = true;\n                        break;\n                    }\n                }\n                if (needAce && typeof ace === 'undefined') {\n                    VPLUtil.loadScript(['../editor/ace9/ace.js'],\n                        function() {\n                           self.highlight();\n                        });\n                    return;\n                }\n                var results = this.results;\n                var shFiles = [];\n                var shFileNames = [];\n                for (let i = 0; i < files.length; i++) {\n                    let file = files[i];\n                    let preid = 'code' + file.tagId;\n                    if (VPLUtil.isBlockly(file.fileName)) {\n                        self.highlightBlockly(preid);\n                        continue;\n                    }\n                    var ext = VPLUtil.fileExtension(file.fileName);\n                    var lang = VPLUtil.langType(ext);\n                    $('#' + preid).show();\n                    $('#' + preid + 'load').remove();\n                    var sh = ace.edit(preid);\n                    sh.setTheme('ace/theme/' + file.theme);\n                    sh.getSession().setMode('ace/mode/' + lang);\n                    sh.renderer.setShowGutter(file.showln);\n                    sh.setReadOnly(true);\n                    sh.setHighlightActiveLine(false);\n                    sh.setAutoScrollEditorIntoView(true);\n                    sh.setOption('maxLines', file.nl);\n                    sh.getAnnotations = function() {\n                        return this.getSession().getAnnotations();\n                    };\n                    sh.setAnnotations = function(a) {\n                        return this.getSession().setAnnotations(a);\n                    };\n                    sh.getTagId = function() {\n                        return this.vplTagId;\n                    };\n                    sh.vplTagId = file.tagId;\n                    shFiles.push(sh);\n                    shFileNames.push(file.fileName);\n                    shs[file.tagId] = sh;\n                }\n                for (var ri = 0; ri < results.length; ri++) {\n                    var tag = document.getElementById(results[ri].tagId);\n                    var text = tag.textContent || tag.innerText;\n                    tag.innerHTML = VPLUtil.processResult(text, shFileNames, shFiles,\n                                                           results[ri].noFormat, results[ri].folding);\n                }\n            };\n\n            VPLUtil.addResults = function(tagId, noFormat, folding) {\n                results.push({'tagId': tagId, 'noFormat': noFormat, 'folding': folding});\n            };\n            VPLUtil.syntaxHighlightFile = function(tagId, fileName, theme, showln, nl) {\n                files.push({\n                    'tagId': tagId,\n                    'fileName': fileName,\n                    'theme': theme,\n                    'showln': showln,\n                    'nl': nl\n                 });\n            };\n            VPLUtil.syntaxHighlight = function() {\n                new SubmissionHighlighter(files, results);\n                files = [];\n                results = [];\n            };\n            VPLUtil.flEventHandler = function(event) {\n                var tag = event.target.getAttribute('href').substring(1);\n                var line = event.target.getAttribute('data-line');\n                var sh = shs[tag];\n                sh.gotoLine(line, 0);\n                sh.scrollToLine(line, true);\n            };\n            VPLUtil.setflEventHandler = function() {\n                var links = document.getElementsByClassName(\"vpl_fl\");\n                for (var i = 0; i < links.length; i++) {\n                    links[i].onclick = VPLUtil.flEventHandler;\n                }\n            };\n            VPLUtil.showHideDiv = function(a) {\n                var text = a;\n                var div = a;\n                if (!div.nextSibling) {\n                    div = div.parentNode;\n                }\n                div = div.nextSibling;\n                while (div.nodeName != 'DIV' && div.nodeName != 'PRE') {\n                    div = div.nextSibling;\n                    if (!div) {\n                        return;\n                    }\n                }\n                if (text) {\n                    if (text.innerHTML == '[+]') {\n                        if (div.savedDisplay) {\n                            div.style.display = div.savedDisplay;\n                        } else {\n                            div.style.display = '';\n                        }\n                        text.innerHTML = '[-]';\n                    } else {\n                        div.savedDisplay = div.style.display;\n                        div.style.display = 'none';\n                        text.innerHTML = '[+]';\n                    }\n                }\n            };\n\n        })();\n        VPLUtil.options = {\n            scriptPath: ''\n        };\n        if (typeof window.VPLDebugMode != 'undefined') {\n            debugMode = window.VPLDebugMode;\n        }\n        VPLUtil.init = function(options) {\n            VPLUtil.options = {\n                scriptPath: ''\n            };\n            $.extend(VPLUtil.options, options);\n            if (typeof window.VPLDebugMode != 'undefined') {\n                debugMode = window.VPLDebugMode;\n            }\n            VPLUtil.log(VPLUtil.options);\n        };\n        // Needs global use of VPLUtil for view source.\n        window.VPLUtil = VPLUtil;\n        return VPLUtil;\n    }\n);\n"],"mappings":"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"}