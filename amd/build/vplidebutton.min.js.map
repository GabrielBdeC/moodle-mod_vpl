{"version":3,"file":"vplidebutton.min.js","names":["define","$","jqui","VPLUtil","VPLIDEButtons","menuElement","isOptionAllowed","self","buttons","notAdded","buttonName","setText","icon","title","str","hasOwnProperty","key","attr","replaceWith","genIcon","setExtracontent","html","btag","find","length","append","add","button","name","active","editorName","originalAction","doNothing","Error","setAction","command","bindKey","exec","action","platform","navigator","startsWith","getHTML","enable","bw","data","removeClass","addClass","getAction","launchAction","setGetkeys","editor","commands","Key","getShortcuts","on","event","actionid","replace","setTimeout","stopImmediatePropagation","check","strkey","shiftKey","altKey","ctrlKey","metaKey","which","char","String","fromCharCode","toLowerCase","preventDefault","multiple","v","m","start","lastLap","interval","hour","show","element","precision","checkt","timeLeft","updatePrecision","updateTimeLeft","now","getCurrentTime","tl","cssclass","thtml","getTimeLeft","toggleTimeLeft","setTimeLeft","options","clearInterval","sync","setInterval","hide","window"],"sources":["../src/vplidebutton.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * IDE Buttons\n *\n * @copyright 2016 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\ndefine(\n    [\n        'jquery',\n        'jqueryui',\n        'mod_vpl/vplutil',\n    ],\n    function($, jqui, VPLUtil) {\n        if (typeof VPLIDEButtons !== 'undefined') {\n            return VPLIDEButtons;\n        }\n        var VPLIDEButtons = function(menuElement, isOptionAllowed) {\n            var self = this;\n            var buttons = {};\n\n            this.notAdded = function(buttonName) {\n                return !buttons[buttonName];\n            };\n            this.setText = function(buttonName, icon, title) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                if (!icon) {\n                    icon = buttons[buttonName].icon;\n                }\n                if (!title) {\n                    title = buttons[buttonName].title;\n                }\n                if (!title) {\n                    title = VPLUtil.str(icon);\n                }\n                buttons[buttonName].icon = icon;\n                buttons[buttonName].title = title;\n                if (buttons[buttonName].hasOwnProperty('key')) {\n                    title += ' (' + buttons[buttonName].key + ')';\n                }\n                $('#vpl_ide_' + buttonName).attr('title', title);\n                $('#vpl_ide_' + buttonName + ' i').replaceWith(VPLUtil.genIcon(icon));\n            };\n            this.setExtracontent = function(buttonName, html) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                var cl = 'bt_extrahtml';\n                var btag = $('#vpl_ide_' + buttonName + ' i');\n                if (btag.find('.' + cl).length == 0) {\n                    btag.append(' <span class=\"' + cl + '\"><span>');\n                }\n                btag.find('.' + cl).html(html);\n            };\n            this.add = function(button) {\n                if (typeof button === 'string') {\n                    var name = button;\n                    button = {\n                        'name': name\n                    };\n                }\n                if (!isOptionAllowed(button.name)) {\n                    return;\n                }\n                if (!button.hasOwnProperty('icon')) {\n                    button.icon = button.name;\n                }\n                if (!button.hasOwnProperty('title')) {\n                    button.title = VPLUtil.str(button.name);\n                }\n                if (!button.hasOwnProperty('active')) {\n                    button.active = true;\n                }\n                if (!button.hasOwnProperty('editorName')) {\n                    button.editorName = button.name;\n                }\n                if (!button.hasOwnProperty('originalAction')) {\n                    button.originalAction = VPLUtil.doNothing;\n                }\n                if (self.notAdded(button.name)) {\n                    buttons[button.name] = button;\n                } else {\n                    throw new Error(\"Button already set \" + button.name);\n                }\n                self.setAction(button.name, button.originalAction);\n                if (button.hasOwnProperty('bindKey')) {\n                    button.command = {\n                        name: button.editorName,\n                        bindKey: button.bindKey,\n                        exec: button.action\n                    };\n                    var platform = \"win\";\n                    if (navigator.platform.startsWith(\"Mac\")) {\n                        platform = \"mac\";\n                    }\n                    button.key = button.bindKey[platform];\n                }\n            };\n            this.getHTML = function(buttonName) {\n                if (self.notAdded(buttonName)) {\n                    return '';\n                } else {\n                    var title = buttons[buttonName].title;\n                    if (buttons[buttonName].hasOwnProperty('key')) {\n                        title += ' (' + buttons[buttonName].key + ')';\n                    }\n\n                    var html = \"<a id='vpl_ide_\" + buttonName + \"' href='#' title='\" + title + \"'>\";\n                    html += VPLUtil.genIcon(buttons[buttonName].icon) + \"</a>\";\n                    return html;\n                }\n            };\n\n            this.enable = function(buttonName, active) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                var bw = $('#vpl_ide_' + buttonName);\n                buttons[buttonName].active = active;\n                bw.data(\"vpl-active\", active);\n                if (!active) {\n                    bw.addClass('ui-button-disabled ui-state-disabled');\n                } else {\n                    bw.removeClass('ui-button-disabled ui-state-disabled');\n                }\n            };\n            this.setAction = function(buttonName, action) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                buttons[buttonName].originalAction = action;\n                buttons[buttonName].action = function() {\n                    if (buttons[buttonName].active) {\n                        action();\n                    }\n                };\n            };\n            this.getAction = function(buttonName) {\n                if (self.notAdded(buttonName)) {\n                    return VPLUtil.doNothing;\n                }\n                return buttons[buttonName].action;\n            };\n            this.launchAction = function(buttonName) {\n                if (self.notAdded(buttonName)) {\n                    return;\n                }\n                buttons[buttonName].originalAction();\n            };\n            this.setGetkeys = function(editor) {\n                if (!editor) {\n                    return;\n                }\n                var commands = editor.commands.commands;\n                var platform = editor.commands.platform;\n                for (var buttonName in buttons) {\n                    if (buttons.hasOwnProperty(buttonName)) {\n                        var editorName = buttons[buttonName].editorName;\n                        if (commands[editorName] && commands[editorName].bindKey && !buttons[buttonName].Key) {\n                            buttons[buttonName].key = commands[editorName].bindKey[platform];\n                            self.setText(buttonName);\n                        } else {\n                            if (buttons[buttonName].bindKey &&\n                                !buttons[buttonName].hasOwnProperty('key')) {\n                                buttons[buttonName].key = buttons[buttonName].bindKey[platform];\n                                self.setText(buttonName);\n                            }\n                        }\n                    }\n                }\n            };\n            this.getShortcuts = function(editor) {\n                var html = '<ul>';\n                for (var buttonName in buttons) {\n                    if (buttons[buttonName].hasOwnProperty('key')) {\n                        html += '<li>';\n                        html += buttons[buttonName].title + ' (' + buttons[buttonName].key + ')';\n                        html += '</li>';\n                    }\n                }\n                html += '</ul>';\n                if (editor) {\n                    html += '<h5>' + VPLUtil.str('edit') + '</h5>';\n                    var commands = editor.commands.commands;\n                    var platform = editor.commands.platform;\n                    html += '<ul>';\n                    for (var editorName in commands) {\n                        if (commands[editorName].hasOwnProperty('bindKey') && commands[editorName].bindKey[platform] > '') {\n                            html += '<li>';\n                            html += editorName + ' (' + commands[editorName].bindKey[platform] + ')';\n                            html += '</li>';\n                        }\n                    }\n                    html += '</ul>';\n                }\n                if (html == '<ul></ul>') {\n                    return '';\n                }\n                return html;\n            };\n            $(menuElement).on(\"click\", \"a\", function(event) {\n                if ($(this).data(\"vpl-active\")) {\n                    var actionid = $(this).attr('id');\n                    if (typeof actionid === 'string' && actionid.startsWith('vpl_ide_')) {\n                        actionid = actionid.replace('vpl_ide_', '');\n                    } else {\n                        return true;\n                    }\n                    if (self.notAdded(actionid)) {\n                        return true;\n                    }\n                    if (buttons[actionid] && !buttons[actionid].active) {\n                        return true;\n                    }\n                    var action = self.getAction(actionid);\n                    if (actionid != 'import') {\n                        setTimeout(action, 10);\n                    } else {\n                        action();\n                    }\n                }\n                event.stopImmediatePropagation();\n                return false;\n            });\n\n            $('body').on('keydown', function(event) {\n                var check = false;\n                var strkey = '';\n                if (event.shiftKey) {\n                    strkey += 'shift-';\n                }\n                if (event.altKey) {\n                    strkey += 'alt-';\n                    check = true;\n                }\n                if (event.ctrlKey) {\n                    strkey += 'ctrl-';\n                    check = true;\n                }\n                if (event.metaKey) {\n                    strkey += 'meta-';\n                    check = true;\n                }\n                if (event.which >= 112 && event.which <= 123) {\n                    strkey += 'f' + (event.which - 111);\n                    check = true;\n                } else {\n                    var char = String.fromCharCode(event.which).toLowerCase();\n                    if (char < 'a' || char > 'z') {\n                        check = false;\n                    } else {\n                        strkey += char;\n                    }\n                }\n                if (check) {\n                    for (var buttonName in buttons) {\n                        if (buttons[buttonName].hasOwnProperty('key')) {\n                            if (strkey == buttons[buttonName].key.toLowerCase()) {\n                                event.preventDefault();\n                                event.stopImmediatePropagation();\n                                buttons[buttonName].action();\n                                return false;\n                            }\n                        }\n                    }\n                }\n                return true;\n            });\n            this.multiple = function(v, m) {\n                return v - (v % m);\n            };\n\n            (function() {\n                var start = 0;\n                var lastLap = 0;\n                var interval = false;\n                var hour = 60 * 60;\n                var day = hour * 24;\n                var cssclasses = 'vpl_buttonleft_orange vpl_buttonleft_red vpl_buttonleft_black';\n                var show = false;\n                var element = null;\n                var precision = 5;\n                var checkt = 1000;\n                var timeLeft = 0;\n                var updatePrecision = function(timeLeft) {\n                    precision = 5;\n                    checkt = 1000;\n                    if (timeLeft > hour) {\n                        precision = 60;\n                        checkt = 5000;\n                    } else if (timeLeft > day) {\n                        precision = 5 * 60;\n                        checkt = 5 * 5000;\n                    }\n                };\n                var updateTimeLeft = function() {\n                    var now = self.multiple(VPLUtil.getCurrentTime(), precision);\n                    if (now === lastLap || element === null) {\n                        return;\n                    }\n                    lastLap = now;\n                    var tl = timeLeft - (lastLap - start);\n                    var cssclass = '';\n                    if (tl <= 0) {\n                        cssclass = 'vpl_buttonleft_black';\n                    } else if (tl <= 5 * 60) {\n                        show = true;\n                        cssclass = 'vpl_buttonleft_red';\n                    } else if (tl <= 15 * 60) {\n                        cssclass = 'vpl_buttonleft_orange';\n                    } else {\n                        updatePrecision(tl);\n                    }\n                    var thtml = '<span class=\"' + cssclass + '\">' + VPLUtil.genIcon('timeleft');\n                    if (show) {\n                        thtml += ' ' + VPLUtil.getTimeLeft(tl);\n                    }\n                    thtml += '</span>';\n                    element.html(thtml);\n                    element.removeClass(cssclasses);\n                    element.addClass(cssclass);\n                };\n                self.toggleTimeLeft = function() {\n                    show = !show;\n                    lastLap = 0;\n                    updateTimeLeft();\n                };\n                self.setTimeLeft = function(options) {\n                    element = $('#vpl_ide_timeleft');\n                    if (interval !== false) {\n                        clearInterval(interval);\n                        interval = false;\n                    }\n                    if (options.hasOwnProperty('timeLeft')) {\n                        timeLeft = options.timeLeft;\n                        updatePrecision(timeLeft);\n                        var sync = timeLeft % precision;\n                        timeLeft = self.multiple(timeLeft, precision);\n                        start = self.multiple(VPLUtil.getCurrentTime(), precision);\n                        lastLap = start - precision;\n                        setTimeout(function() {\n                            interval = setInterval(updateTimeLeft, checkt);\n                        }, sync * 1000);\n                        $('#vpl_ide_timeleft').show();\n                        updateTimeLeft();\n\n                    } else {\n                        $('#vpl_ide_timeleft').hide();\n                    }\n                };\n            })();\n        };\n        window.VPLIDEButtons = VPLIDEButtons;\n        return VPLIDEButtons;\n    }\n);\n"],"mappings":"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"}