{"version":3,"file":"vplideblocklyfile.min.js","names":["define","$","VPLUtil","self","vplIdeInstance","getVPLIDE","firstContent","workspaceInstance","adaptBlockly","Blockly","PHP","workspaceToCodeOld","workspaceToCode","workspace","Python","oldAdjustSize","adjustSize","call","editTag","getTId","length","tabs","parent","newHeight","height","position","top","bdiv","width","svgResize","undo","isOpen","redo","interpreter","animateRun","RUNSTATE","STEPSTATE","STOPSTATE","executionState","goNext","initRun","animate","ter","getTerminal","isConnected","closeLocal","JavaScript","STATEMENT_PREFIX","addReservedWords","code","initApi","scope","wrapperAlert","text","toString","createPrimitive","writeLocal","setProperty","createNativeFunction","wrapperPrompt","callback","setDataCallback","t","createAsyncFunction","wrapperHighlightBlock","id","getBreakpoint","updateRunButtons","setMessage","str","highlightBlock","Interpreter","connectLocal","stop","doNothing","reservedWords","breakpoint","lastSelection","setBreakpoint","removeBreakpoint","setLastSelection","selection","isSelectingBreakpoint","getVarValue","val","HTML","undefined","type","sanitizeText","class","ar","properties","i","getVariables","proname","pro","value","getParameters","args","showStack","sn","stack","stateStack","lastFunc","level","node","callee","name","arguments_","setResult","variables","runLoop","step","setTimeout","start","startAnimate","pause","resume","hasUndo","hasRedo","oldSetFileName","setFileName","generatorMap","py","dart","js","lua","php","generator","newName","oldFileName","getFileName","oldExt","fileExtension","log","regExt2","regFn2","ext2","exec","fn2","generatedFilename","updateGeneratedCode","afterAll","close","open","blocklyNotLoaded","fileManager","getFileManager","fid","fileNameExists","addFile","contents","fileGenerated","getFile","getContent","setContent","change","gotoLine","setReadOnly","changeCode","event","element","newValue","longDelay","clearUndo","recordUndo","triesUpdateRunButtons","triesUpdateRunButtonsLimits","dimmed","removeClass","addClass","setToolbox","ext","toolboxname","ajax","url","dataType","success","data","blocklyIn18","addUpdateButtons","func","callBacks","wp","updateToolbox","key","registerButtonCallback","showFileName","loadScript","setOpen","fileName","horizontalMenu","test","tid","getId","html","options","toolbox","media","horizontalLayout","zoom","controls","wheel","startScale","maxScale","minScale","scaleSpeed","inject","addChangeListener","adjustBlockly","scrollX","scrollY","resizeSvgContents","getContentOld","xml","Xml","workspaceToDom","xmlText","domToPrettyText","setContentOld","c","clear","textToDom","domToWorkspace","dispose","blocklyToolbox","blockly0Toolbox","blockly1Toolbox","blockly2Toolbox","blockly3Toolbox","blocklyStrs","l","reg","RegExp","rep","replace"],"sources":["../src/vplideblocklyfile.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Blockly file management\n *\n * @copyright 2013 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\n/* globals Interpreter */\n/* globals Blockly */\n\ndefine(\n    [\n        'jquery',\n        'mod_vpl/vplutil',\n    ],\n    function($, VPLUtil) {\n        return function() {\n            var self = this;\n            var vplIdeInstance = this.getVPLIDE();\n            this.firstContent = true;\n            this.workspaceInstance = false;\n            var adaptBlockly = function() {\n                if (typeof Blockly.PHP.workspaceToCodeOld == 'undefined') {\n                    Blockly.PHP.workspaceToCodeOld = Blockly.PHP.workspaceToCode;\n                    Blockly.PHP.workspaceToCode = function(workspace) {\n                        return \"<?php\\n\" + Blockly.PHP.workspaceToCodeOld(workspace);\n                    };\n                }\n                if (typeof Blockly.Python.workspaceToCodeOld == 'undefined') {\n                    Blockly.Python.workspaceToCodeOld = Blockly.Python.workspaceToCode;\n                    Blockly.Python.workspaceToCode = function(workspace) {\n                        return \"# -*- coding: utf-8 -*-\\n\" + Blockly.Python.workspaceToCodeOld(workspace);\n                    };\n                }\n            };\n            var oldAdjustSize = this.adjustSize;\n            this.adjustSize = function() {\n                if (oldAdjustSize.call(this)) {\n                    var editTag = $(this.getTId());\n                    if (editTag.length === 0) {\n                        return false;\n                    }\n                    var tabs = editTag.parent();\n                    var newHeight = tabs.height();\n                    newHeight -= editTag.position().top;\n                    editTag.height(newHeight);\n                    $('#' + this.bdiv).height(newHeight);\n                    $('#' + this.bdiv).width(editTag.width());\n                    Blockly.svgResize(this.workspaceInstance);\n                    return false;\n                }\n                return false;\n            };\n            this.undo = function() {\n                if (this.isOpen()) {\n                    this.workspaceInstance.undo(false);\n                }\n            };\n            this.redo = function() {\n                if (this.isOpen()) {\n                    this.workspaceInstance.undo(true);\n                }\n            };\n            this.interpreter = false;\n            this.animateRun = false;\n            this.RUNSTATE = 1;\n            this.STEPSTATE = 2;\n            this.STOPSTATE = 3;\n            this.executionState = this.STOPSTATE;\n            this.goNext = false;\n            this.initRun = function(animate) {\n                var ter = vplIdeInstance.getTerminal();\n                if (ter.isConnected()) {\n                    ter.closeLocal();\n                }\n                this.animateRun = animate;\n                Blockly.JavaScript.STATEMENT_PREFIX = 'highlightBlock(%1);\\n';\n                Blockly.JavaScript.addReservedWords('highlightBlock');\n                var code = Blockly.JavaScript.workspaceToCode(self.workspaceInstance);\n                var initApi = function(interpreter, scope) {\n                    // Add an API function for the alert() block.\n                    var wrapperAlert = function(text) {\n                        text = typeof text != 'string' ? text.toString() + '\\r\\n' : text + '\\r\\n';\n                        return interpreter.createPrimitive(ter.writeLocal(text));\n                    };\n                    interpreter.setProperty(scope, 'alert',\n                            interpreter.createNativeFunction(wrapperAlert));\n\n                    // Add an API function for the prompt() block.\n                    var wrapperPrompt = function(text, callback) {\n                        text = typeof text != 'string' ? text.toString() : '' + text;\n                        ter.writeLocal(text);\n                        ter.setDataCallback(function(t) {\n                                               ter.writeLocal('\\n');\n                                               callback(t);\n                                            });\n                    };\n                    interpreter.setProperty(scope, 'prompt',\n                        interpreter.createAsyncFunction(wrapperPrompt));\n\n                    var wrapperHighlightBlock = function(id) {\n                        if (id == self.getBreakpoint()) {\n                            self.executionState = self.STEPSTATE;\n                            self.updateRunButtons();\n                            vplIdeInstance.getTerminal().setMessage(VPLUtil.str('breakpoint'));\n                        }\n                        if (self.animateRun || self.executionState == self.STEPSTATE) {\n                            self.workspaceInstance.highlightBlock(id);\n                        }\n                        self.goNext = false;\n                    };\n                    interpreter.setProperty(scope, 'highlightBlock',\n                            interpreter.createNativeFunction(wrapperHighlightBlock));\n                };\n                self.interpreter = new Interpreter(code, initApi);\n                ter.connectLocal(self.stop, VPLUtil.doNothing);\n            };\n            this.reservedWords = {\n                'Infinity': true, 'Array': true, 'Boolean': true,\n                'Date': true, 'Error': true, 'EvalError': true,\n                'Function': true, 'JSON': true, 'Math': true,\n                'NaN': true, 'Number': true, 'Object': true, 'RangeError': true,\n                'ReferenceError': true, 'RegExp': true, 'String': true,\n                'SyntaxError': true, 'TypeError': true, 'URIError': true,\n                'alert': true, 'arguments': true, 'constructor': true, 'eval': true,\n                'highlightBlock': true, 'isFinite': true,\n                'isNaN': true, 'parseFloat': true, 'parseInt': true, 'prompt': true,\n                'self': true, 'this': true, 'window': true,\n            };\n            (function() {\n                var breakpoint = null;\n                var lastSelection = null;\n                self.getBreakpoint = function() {\n                    return breakpoint;\n                };\n                self.setBreakpoint = function() {\n                    breakpoint = lastSelection;\n                };\n                self.removeBreakpoint = function() {\n                    breakpoint = null;\n                };\n                self.setLastSelection = function(selection) {\n                    lastSelection = selection;\n                };\n                self.isSelectingBreakpoint = function() {\n                    return breakpoint === null && lastSelection !== null;\n                };\n            })();\n            this.getVarValue = function(val) {\n                var HTML = '';\n                if (val === null) {\n                    HTML = \"<b>null</b>\";\n                } else if (val != undefined) {\n                    var type = typeof val;\n                    if (type == 'string') {\n                        HTML = '\"' + VPLUtil.sanitizeText(val) + '\"';\n                    } else if (type == 'boolean') {\n                        HTML = \"<b>\" + val + \"</b>\";\n                    } else if (type == 'object' && val.class === \"Array\") {\n                        HTML = '[';\n                        var ar = val.properties;\n                        for (var i = 0; i < ar.length; i++) {\n                            HTML += self.getVarValue(ar[i]);\n                            if (i != ar.length - 1) {\n                                HTML += ', ';\n                            }\n                        }\n                        HTML += ']';\n                    } else if (type == 'object') {\n                        HTML = \"<b>\" + val.toString() + \"</b>\";\n                    } else {\n                        HTML += '' + val;\n                    }\n                }\n                return HTML;\n            };\n            this.getVariables = function(properties) {\n                var HTML = '';\n                for (var proname in properties) {\n                    if (this.reservedWords[proname] === true) {\n                        continue;\n                    }\n                    var pro = properties[proname];\n                    if (pro != undefined && !(pro.class === \"Function\")) {\n                        var value = VPLUtil.sanitizeText(self.getVarValue(pro));\n                        HTML += '<b>' + proname + \"</b>:&nbsp;\" + value + \"<br>\\n\";\n                    }\n                }\n                return HTML;\n            };\n            this.getParameters = function(args) {\n                var HTML = '(';\n                for (var i = 0; i < args.length; i++) {\n                    HTML += '' + args[i];\n                    if (i < args.length - 1) {\n                        HTML += ', ';\n                    }\n                }\n                return HTML + ')';\n            };\n            this.showStack = function(interpreter) {\n                var sn = 0;\n                var HTML = '<table class=\"generaltable\">';\n                var stack = interpreter.stateStack;\n                var lastFunc = '<tr><td>0</td><td><b>Globals</b></td>';\n                for (var i = 0; i < stack.length; i++) {\n                    var level = stack[i];\n                    if (lastFunc > '' && (level.node.type == 'CallExpression' || i == stack.length - 1)) {\n                        HTML += lastFunc + '<td>' + self.getVariables(level.scope.properties);\n                        HTML += '</td></tr>';\n                    }\n                    if (level.node.type == 'CallExpression') {\n                        if (self.reservedWords[level.node.callee.name] !== true\n                        && level.node.callee.name != undefined) {\n                            sn++;\n                            lastFunc = '<tr><td>' + sn + '</td>';\n                            lastFunc += '<td>' + level.node.callee.name + self.getParameters(level.arguments_) + '</td>';\n                        } else {\n                            lastFunc = '';\n                        }\n                    }\n                }\n                HTML += '</table>';\n                vplIdeInstance.setResult({variables: HTML});\n            };\n            this.runLoop = function() {\n                if (!self.interpreter) {\n                    return;\n                }\n                self.goNext = true;\n                for (var i = 0; i < 30000 && self.goNext; i++) {\n                    if (self.executionState == self.STOPSTATE) {\n                        break;\n                    }\n                    if (!self.interpreter || !self.interpreter.step()) {\n                        self.executionState = self.STOPSTATE;\n                        self.updateRunButtons();\n                        break;\n                    }\n                }\n                if (self.executionState == self.STOPSTATE) {\n                    self.workspaceInstance.highlightBlock(-1);\n                    vplIdeInstance.getTerminal().closeLocal();\n                    vplIdeInstance.setResult({variables: ''});\n                    return;\n                }\n                if (self.executionState == self.RUNSTATE) {\n                    if (self.animateRun) {\n                        setTimeout(self.runLoop, 1000);\n                        self.showStack(self.interpreter);\n                    } else {\n                        setTimeout(self.runLoop, 0);\n                    }\n                } else {\n                    self.showStack(self.interpreter);\n                }\n            };\n            this.start = function() {\n                if (self.executionState != self.STOPSTATE) {\n                    return;\n                }\n                self.initRun(false);\n                self.executionState = self.RUNSTATE;\n                self.updateRunButtons();\n                vplIdeInstance.getTerminal().setMessage(VPLUtil.str('start'));\n                self.runLoop();\n            };\n            this.startAnimate = function() {\n                if (self.executionState != self.STOPSTATE) {\n                    return;\n                }\n                self.initRun(true);\n                self.executionState = self.RUNSTATE;\n                self.updateRunButtons();\n                vplIdeInstance.getTerminal().setMessage(VPLUtil.str('startanimate'));\n                self.runLoop();\n            };\n            this.stop = function() {\n                self.executionState = self.STOPSTATE;\n                self.workspaceInstance.highlightBlock(-1);\n                self.updateRunButtons();\n                vplIdeInstance.getTerminal().setMessage(VPLUtil.str('stop'));\n                vplIdeInstance.getTerminal().closeLocal();\n                self.interpreter = false;\n                vplIdeInstance.setResult({variables: ''});\n            };\n            this.pause = function() {\n                if (self.executionState != self.RUNSTATE) {\n                    return;\n                }\n                self.executionState = self.STEPSTATE;\n                vplIdeInstance.getTerminal().setMessage(VPLUtil.str('pause'));\n                self.updateRunButtons();\n            };\n            this.resume = function() {\n                if (self.executionState != self.STEPSTATE) {\n                    return;\n                }\n                self.executionState = self.RUNSTATE;\n                vplIdeInstance.getTerminal().setMessage(VPLUtil.str('resume'));\n                self.updateRunButtons();\n                self.runLoop();\n            };\n            this.step = function() {\n                if (self.executionState == self.STOPSTATE) {\n                    self.initRun(true);\n                }\n                self.executionState = self.STEPSTATE;\n                self.updateRunButtons();\n                vplIdeInstance.getTerminal().setMessage(VPLUtil.str('step'));\n                self.runLoop();\n            };\n            this.hasUndo = function() {\n                return true;\n            };\n            this.hasRedo = function() {\n                return true;\n            };\n            this.oldSetFileName = this.setFileName;\n            this.generatorMap = {\n                py: 'Python',\n                dart: 'Dart',\n                js: 'JavaScript',\n                lua: 'Lua',\n                php: 'PHP'\n            };\n            this.generator = '';\n            this.setFileName = function(newName) {\n                var oldFileName = this.getFileName();\n                var oldExt = VPLUtil.fileExtension(oldFileName);\n                if (!self.oldSetFileName(newName)) {\n                    VPLUtil.log(\"Blockly setFileName: name no acepted \" + newName);\n                    return false;\n                }\n                VPLUtil.log('Blockly set filename ' + newName);\n                var regExt2 = /\\.([^.]+)\\.blockly[123]?$/;\n                var regFn2 = /(.+)\\.blockly[123]?$/;\n                var ext2 = regExt2.exec(newName);\n                var fn2 = regFn2.exec(newName);\n                if (ext2 !== null && fn2 !== null && typeof this.generatorMap[ext2[1]] == 'string') {\n                    this.generator = this.generatorMap[ext2[1]];\n                    this.generatedFilename = fn2[1];\n                    VPLUtil.log('Blockly generator ' + this.generator + ' for filename ' + this.generatedFilename);\n                    this.updateGeneratedCode();\n                } else {\n                    this.generator = '';\n                }\n                if (oldExt != VPLUtil.fileExtension(newName)) {\n                    VPLUtil.log('Blockly extension changed');\n                    VPLUtil.afterAll('reopenBlockly', function() {\n                            VPLUtil.log('reopenBlockly');\n                            self.close();\n                            self.open();\n                        }\n                    );\n                }\n                return true;\n            };\n            this.updateGeneratedCode = function() {\n                if (self.blocklyNotLoaded) {\n                    return;\n                }\n                var fileManager = self.getFileManager();\n                if (self.generator != '') {\n                    VPLUtil.log('Blockly generate ' + self.generator);\n                    var fid = fileManager.fileNameExists(self.generatedFilename);\n                    // Try to create generated code file.\n                    if (fid == -1) {\n                        VPLUtil.log(\"try to create \" + self.generatedFilename + \" files\");\n                        fileManager.addFile({\n                            name: self.generatedFilename,\n                            contents: ''},\n                            false, VPLUtil.doNothing, VPLUtil.doNothing);\n                        fid = fileManager.fileNameExists(self.generatedFilename);\n                    }\n                    if (fid != -1) {\n                        var code = Blockly[self.generator].workspaceToCode(self.workspaceInstance);\n                        var fileGenerated = fileManager.getFile(fid);\n                        if (fileGenerated.getContent() != code) {\n                            fileGenerated.setContent(code);\n                            fileGenerated.change();\n                            fileGenerated.gotoLine(1);\n                            fileGenerated.setReadOnly(true);\n                        }\n                    }\n                }\n            };\n            this.changeCode = function(event) {\n                VPLUtil.log(event);\n                if (event.type == 'ui' && event.element == 'selected') {\n                    self.setLastSelection(event.newValue);\n                    return;\n                }\n                if (event.type == 'ui'\n                        && event.element == 'category'\n                        && event.newValue == VPLUtil.str('run')) {\n                        VPLUtil.longDelay('updateRunButtons', self.updateRunButtons);\n                    return;\n                }\n                if (self.firstContent) {\n                    if (event.type == 'finished_loading') {\n                        self.firstContent = false;\n                        self.workspaceInstance.clearUndo();\n                    } else {\n                        return;\n                    }\n                }\n                if (!event.recordUndo) {\n                    return;\n                }\n\n                VPLUtil.log('Call change due changeCode');\n                self.change();\n                if (self.generator != '') {\n                    VPLUtil.afterAll('generate' + self.getFileName(), self.updateGeneratedCode);\n                }\n            };\n            var triesUpdateRunButtons = 0;\n            var triesUpdateRunButtonsLimits = 20;\n            this.updateRunButtons = function() {\n                if ($('.blocklySelectBreakpointC').length == 0) {\n                    triesUpdateRunButtons++;\n                    if (triesUpdateRunButtons > triesUpdateRunButtonsLimits) {\n                        triesUpdateRunButtons = 0;\n                        VPLUtil.log('Giving up to tries of updateRunButtons');\n                        return;\n                    }\n                    VPLUtil.longDelay('updateRunButtons', self.updateRunButtons);\n                    return;\n                }\n                VPLUtil.log('updateRunButtons');\n                triesUpdateRunButtons = 0;\n                var dimmed = 'vpl_dimmed';\n                if (self.isSelectingBreakpoint()) {\n                    $('.blocklySelectBreakpointC').removeClass(dimmed);\n                } else {\n                    $('.blocklySelectBreakpointC').addClass(dimmed);\n                }\n                if (self.getBreakpoint() === null) {\n                    $('.blocklyRemoveBreakpointC').addClass(dimmed);\n                } else {\n                    $('.blocklyRemoveBreakpointC').removeClass(dimmed);\n                }\n                switch (self.executionState) {\n                    case self.RUNSTATE: {\n                        $('.blocklyStartC').addClass(dimmed);\n                        $('.blocklyStartAnimateC').addClass(dimmed);\n                        $('.blocklyStopC').removeClass(dimmed);\n                        $('.blocklyPauseC').removeClass(dimmed);\n                        $('.blocklyResumeC').addClass(dimmed);\n                        $('.blocklyStepC').addClass(dimmed);\n                        break;\n                    }\n                    case self.STEPSTATE: {\n                        $('.blocklyStartC').addClass(dimmed);\n                        $('.blocklyStartAnimateC').addClass(dimmed);\n                        $('.blocklyStopC').removeClass(dimmed);\n                        $('.blocklyPauseC').addClass(dimmed);\n                        $('.blocklyResumeC').removeClass(dimmed);\n                        $('.blocklyStepC').removeClass(dimmed);\n                        break;\n                    }\n                    case self.STOPSTATE: {\n                        $('.blocklyStartC').removeClass(dimmed);\n                        $('.blocklyStartAnimateC').removeClass(dimmed);\n                        $('.blocklyStopC').addClass(dimmed);\n                        $('.blocklyPauseC').addClass(dimmed);\n                        $('.blocklyResumeC').addClass(dimmed);\n                        $('.blocklyStepC').removeClass(dimmed);\n                        break;\n                    }\n                }\n            };\n            this.setToolbox = function() {\n                var ext = VPLUtil.fileExtension(this.getFileName());\n                var toolboxname = ext + 'Toolbox';\n                if (self[toolboxname] === false) {\n                    $.ajax({\n                        url: '../editor/blocklytoolboxes/' + toolboxname + '.xml',\n                        dataType: 'text',\n                        success: function(data) {\n                            self[toolboxname] = self.blocklyIn18(data);\n                            self.setToolbox();\n                        },\n                    });\n                    return;\n                }\n                var addUpdateButtons = function(func) {\n                    return function() {\n                        func();\n                        self.updateRunButtons();\n                    };\n                };\n                var callBacks = {\n                    'blocklyStartButton': this.start,\n                    'blocklyStartAnimateButton': this.startAnimate,\n                    'blocklyStopButton': this.stop,\n                    'blocklyPauseButton': this.pause,\n                    'blocklyResumeButton': this.resume,\n                    'blocklyStepButton': this.step,\n                    'blocklySelectBreakpointButton': this.setBreakpoint,\n                    'blocklyRemoveBreakpointButton': this.removeBreakpoint,\n                };\n                var wp = this.workspaceInstance;\n                wp.updateToolbox(this[toolboxname]);\n                for (var key in callBacks) {\n                    wp.registerButtonCallback(key, addUpdateButtons(callBacks[key]));\n                }\n                this.adjustSize();\n            };\n            this.open = function() {\n                this.showFileName();\n                if (self.blocklyNotLoaded) {\n                    VPLUtil.loadScript(\n                        [\n                            '../editor/blockly/blockly_compressed.js',\n                            '../editor/blockly/msg/js/en.js',\n                            '../editor/blockly/blocks_compressed.js',\n                            '../editor/blockly/python_compressed.js',\n                            '../editor/blockly/javascript_compressed.js',\n                            '../editor/blockly/php_compressed.js',\n                            '../editor/blockly/lua_compressed.js',\n                            '../editor/blockly/dart_compressed.js',\n                            '../editor/acorn/acorn.js',\n                            '../editor/acorn/interpreter.js',\n                        ],\n                        function() {\n                            VPLUtil.log('Blocklyloaded', true);\n                            adaptBlockly();\n                            self.blocklyNotLoaded = false;\n                            self.open();\n                        }\n                    );\n                    return false;\n                }\n                var code = this.getContent();\n                this.setOpen(true);\n                var fileName = this.getFileName();\n                var horizontalMenu = false;\n                if (/.*[0-9]$/.test(VPLUtil.fileExtension(fileName))) {\n                    horizontalMenu = true;\n                }\n                var tid = this.getTId();\n                // Workaround to remove jquery-ui theme background color.\n                $(tid).removeClass('ui-widget-content ui-tabs-panel');\n                $(tid).addClass('ui-corner-bottom');\n                this.bdiv = 'bkdiv' + this.getId();\n                $(tid).html('<div id=\"' + this.bdiv + '\" style=\"height: 480px; width: 600px;\"></div>');\n                var options = {\n                    toolbox: '<xml><category name=\"\" colour=\"330\"><block type=\"math_number\"></block></category></xml>',\n                    media: '../editor/blockly/media/',\n                    horizontalLayout: horizontalMenu,\n                    zoom: {\n                        controls: true,\n                        wheel: true,\n                        startScale: 1.0,\n                        maxScale: 3,\n                        minScale: 0.2,\n                        scaleSpeed: 1.05\n                    }\n                };\n                this.workspaceInstance = Blockly.inject(this.bdiv, options);\n                this.setToolbox();\n                this.firstContent = code > '';\n                self.workspaceInstance.addChangeListener(self.changeCode);\n                this.setContent(code);\n                VPLUtil.adjustBlockly(self.workspaceInstance, 10, 10);\n                self.workspaceInstance.scrollX = 0;\n                self.workspaceInstance.scrollY = 0;\n                Blockly.svgResize(self.workspaceInstance);\n                Blockly.resizeSvgContents(self.workspaceInstance);\n                self.setFileName(self.getFileName());\n                self.adjustSize();\n                // Must return false. Do not change it.\n                return false;\n            };\n            var getContentOld = this.getContent;\n            this.getContent = function() {\n                if (!this.isOpen()) {\n                    return getContentOld.call(this);\n                }\n                var xml = Blockly.Xml.workspaceToDom(this.workspaceInstance);\n                var xmlText = Blockly.Xml.domToPrettyText(xml);\n                return xmlText;\n            };\n            var setContentOld = this.setContent;\n            this.setContent = function(c) {\n                setContentOld.call(this, c);\n                if (c.length > 0 && this.isOpen()) {\n                    this.workspaceInstance.clear();\n                    var xml = Blockly.Xml.textToDom(c);\n                    Blockly.Xml.domToWorkspace(xml, this.workspaceInstance);\n                }\n            };\n            this.close = function() {\n                if (this.isOpen()) {\n                    setContentOld.call(this, this.getContent());\n                    this.workspaceInstance.dispose();\n                    this.workspaceInstance = false;\n                    this.setOpen(false);\n                }\n            };\n            this.blocklyNotLoaded = true;\n            this.blocklyToolbox = false;\n            this.blockly0Toolbox = false;\n            this.blockly1Toolbox = false;\n            this.blockly2Toolbox = false;\n            this.blockly3Toolbox = false;\n            this.blocklyStrs = [\n                'basic',\n                'intermediate',\n                'advanced',\n                'variables',\n                'operatorsvalues',\n                'control',\n                'inputoutput',\n                'functions',\n                'lists',\n                'math',\n                'text',\n                'run',\n                'start',\n                'startanimate',\n                'stop',\n                'pause',\n                'resume',\n                'step',\n                'breakpoint',\n                'selectbreakpoint',\n                'removebreakpoint'\n            ];\n            this.blocklyIn18 = function(data) {\n                var l = this.blocklyStrs.length;\n                for (var i = 0; i < l; i++) {\n                    var str = this.blocklyStrs[i];\n                    var reg = new RegExp('\\\\[\\\\[' + str + '\\\\]\\\\]', 'g');\n                    var rep = VPLUtil.str(str);\n                    data = data.replace(reg, rep);\n                }\n                return data;\n            };\n        };\n    }\n);\n"],"mappings":"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"}