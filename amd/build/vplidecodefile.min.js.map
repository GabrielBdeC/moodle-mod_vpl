{"version":3,"file":"vplidecodefile.min.js","names":["define","$","VPLUtil","self","editor","session","readOnly","getFileManager","getOldContent","getContent","isOpen","call","getValue","setOldContent","setContent","c","setValue","oldDestroy","destroy","setFontSize","size","oldAdjustSize","adjustSize","resize","gotoLine","line","scrollToLine","focus","setReadOnly","s","tid","getTId","removeClass","blur","undo","redo","selectAll","hasUndo","getUndoManager","hasRedo","hasSelectAll","returnTrue","hasFind","hasFindReplace","hasNext","find","execCommand","replace","next","getAnnotations","setAnnotations","a","clearAnnotations","langSelection","ext","fileExtension","getFileName","lang","langType","setMode","getEditor","setTheme","theme","open","showFileName","ace","loadScript","fileManager","require","edit","getId","getSession","setOptions","enableBasicAutocompletion","enableSnippets","getFontSize","getTheme","$blockScrolling","Infinity","setUseSoftTabs","setTabSize","setUndoManager","UndoManager","setOpen","addEventDrop","tag","length","on","dropHandler","button","trigger","setTimeout","change","prevOnPaste","onPaste","restrictedEdit","insert","getClipboard","t","setClipboard","text","restrictedPaste","dragoverHandler","css","close"],"sources":["../src/vplidecodefile.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Code files extension method using ACE editorfiles. Add to VPLFile object.\n *\n * @copyright 2013 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\n/* globals ace */\n\ndefine(\n    [\n        'jquery',\n        'mod_vpl/vplutil',\n    ],\n    function($, VPLUtil) {\n        return function() {\n            var self = this;\n            var editor = null;\n            var session = null;\n            var readOnly = self.getFileManager().readOnly;\n            var getOldContent = this.getContent;\n            this.getContent = function() {\n                if (!this.isOpen()) {\n                    return getOldContent.call(this);\n                }\n                return editor.getValue();\n            };\n            var setOldContent = this.setContent;\n            this.setContent = function(c) {\n                setOldContent.call(this, c);\n                if (this.isOpen()) {\n                    editor.setValue(c);\n                }\n            };\n            var oldDestroy = this.destroy;\n            this.destroy = function() {\n                if (this.isOpen()) {\n                    editor.destroy();\n                }\n                oldDestroy.call(this);\n            };\n            this.setFontSize = function(size) {\n                if (this.isOpen()) {\n                    editor.setFontSize(size);\n                }\n            };\n            var oldAdjustSize = this.adjustSize;\n            this.adjustSize = function() {\n                if (oldAdjustSize.call(this)) {\n                    editor.resize(true);\n                    return true;\n                }\n                return false;\n            };\n            this.gotoLine = function(line) {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.gotoLine(line, 0);\n                editor.scrollToLine(line, true);\n                editor.focus();\n            };\n            this.setReadOnly = function(s) {\n                readOnly = s;\n                if (this.isOpen()) {\n                    editor.setReadOnly(s);\n                }\n            };\n            this.focus = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                var tid = this.getTId();\n                // Workaround to remove JQwery-UI background color.\n                $(tid).removeClass('ui-widget-content ui-tabs-panel');\n                editor.focus();\n            };\n            this.blur = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.blur();\n            };\n            this.undo = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.undo();\n                editor.focus();\n            };\n            this.redo = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.redo();\n                editor.focus();\n            };\n            this.selectAll = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.selectAll();\n                editor.focus();\n            };\n            this.hasUndo = function() {\n                if (!this.isOpen()) {\n                    return false;\n                }\n                return session.getUndoManager().hasUndo();\n            };\n            this.hasRedo = function() {\n                if (!this.isOpen()) {\n                    return false;\n                }\n                return session.getUndoManager().hasRedo();\n            };\n            this.hasSelectAll = VPLUtil.returnTrue;\n            this.hasFind = VPLUtil.returnTrue;\n            this.hasFindReplace = VPLUtil.returnTrue;\n            this.hasNext = VPLUtil.returnTrue;\n            this.find = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.execCommand('find');\n            };\n            this.replace = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.execCommand('replace');\n            };\n            this.next = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.execCommand('findnext');\n            };\n            this.getAnnotations = function() {\n                if (!this.isOpen()) {\n                    return [];\n                }\n                return session.getAnnotations();\n            };\n            this.setAnnotations = function(a) {\n                if (!this.isOpen()) {\n                    return false;\n                }\n                return session.setAnnotations(a);\n            };\n            this.clearAnnotations = function() {\n                if (!this.isOpen()) {\n                    return false;\n                }\n                return session.clearAnnotations();\n            };\n            this.langSelection = function() {\n                if (!this.isOpen()) {\n                    return;\n                }\n                var ext = VPLUtil.fileExtension(this.getFileName());\n                var lang = 'text';\n                if (ext !== '') {\n                    lang = VPLUtil.langType(ext);\n                }\n                session.setMode(\"ace/mode/\" + lang);\n            };\n            this.getEditor = function() {\n                if (!this.isOpen()) {\n                    return false;\n                }\n                return editor;\n            };\n            this.setTheme = function(theme) {\n                if (!this.isOpen()) {\n                    return;\n                }\n                editor.setTheme(\"ace/theme/\" + theme);\n            };\n            this.open = function() {\n                this.showFileName();\n                if (typeof ace === 'undefined') {\n                    VPLUtil.loadScript(['../editor/ace9/ace.js',\n                        '../editor/ace9/ext-language_tools.js'],\n                        function() {\n                            self.open();\n                        });\n                    return false;\n                }\n                if (this.isOpen()) {\n                    return editor;\n                }\n                var fileManager = this.getFileManager();\n                var tid = this.getTId();\n                // Workaround to remove jquery-ui theme background color.\n                $(tid).removeClass('ui-widget-content ui-tabs-panel');\n                ace.require(\"ext/language_tools\");\n                editor = ace.edit(\"vpl_file\" + this.getId());\n                session = editor.getSession();\n                editor.setOptions({\n                    enableBasicAutocompletion: true,\n                    enableSnippets: true,\n                });\n                editor.setValue(this.getContent());\n                editor.setFontSize(fileManager.getFontSize());\n                editor.setTheme(\"ace/theme/\" + fileManager.getTheme());\n                editor.$blockScrolling = Infinity;\n                editor.gotoLine(1, 0);\n                editor.setReadOnly(readOnly);\n                session.setUseSoftTabs(true);\n                session.setTabSize(4);\n                // Avoid undo of editor initial content.\n                session.setUndoManager(new ace.UndoManager());\n                this.setOpen(true);\n                this.langSelection();\n                // Code to control Paste and drop under restricted editing.\n                editor.execCommand('replace');\n                var addEventDrop = function() {\n                    var tag = $(tid + ' div.ace_search');\n                    if (tag.length) {\n                        tag.on('drop', fileManager.dropHandler);\n                        var button = $('.ace_searchbtn_close');\n                        button.trigger('click');\n                    } else {\n                        setTimeout(addEventDrop, 50);\n                    }\n                };\n                editor.on('change', function() {\n                    self.change();\n                });\n                // Try to grant dropHandler installation.\n                setTimeout(addEventDrop, 5);\n                // Save previous onPaste and change for a new one.\n                var prevOnPaste = editor.onPaste;\n                editor.onPaste = function(s) {\n                    if (fileManager.restrictedEdit) {\n                        editor.insert(fileManager.getClipboard());\n                    } else {\n                        prevOnPaste.call(editor, s);\n                    }\n                };\n                // Control copy and cut (yes cut also use this) for localClipboard.\n                editor.on('copy', function(t) {\n                    fileManager.setClipboard(t.text);\n                });\n                $(tid).on('paste', '*', fileManager.restrictedPaste);\n                $(tid + ' div.ace_content').on('drop', fileManager.dropHandler);\n                $(tid + ' div.ace_content').on('dragover', fileManager.dragoverHandler);\n                // Workaround to avoid hidden first line in editor.\n                $(tid).find('div.ace_scroller').css('position', 'static');\n                this.adjustSize();\n                $(tid).find('div.ace_scroller').css('position', 'absolute');\n                return editor;\n            };\n            this.close = function() {\n                this.setOpen(false);\n                if (editor === null) {\n                    return;\n                }\n                this.setContent(editor.getValue());\n                editor.destroy();\n                editor = null;\n                session = null;\n            };\n        };\n    }\n);\n"],"mappings":"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"}