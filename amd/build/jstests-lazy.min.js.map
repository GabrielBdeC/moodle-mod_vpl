{"version":3,"file":"jstests-lazy.min.js","names":["define","$","VPLUtil","showResults","stat","nAsserts","window","console","log","append","text","message","result","length","list","i","element","assert","b","push","testing","assertEquals","a","runTests","tests","name","test","e","stack","returnTrue","returnFalse","rawData","ArrayBuffer","byteLength","bufferData","Uint8Array","Math","round","random","stringData","rawResult","String2ArrayBuffer","stringResult","ArrayBuffer2String","bufferResult","j","fileExtension","isImage","isBinary","isBlockly","validFileName","start"],"sources":["../src/jstests-lazy.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * VPL JavaScript test\n *\n * @copyright 2017 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\ndefine(\n    [\n        'jquery',\n        'mod_vpl/vplutil',\n    ],\n    function($, VPLUtil) {\n        var tests = [];\n        var result = [];\n        var testing = '';\n        var nAsserts = 0;\n        /**\n         * Show results of tests in page and window.console\n         */\n        function showResults() {\n            var stat = nAsserts + \" asserts tested\";\n            window.console.log(stat);\n            $('#test_results').append($('<p></p>').text(stat));\n            var message;\n            if (result.length == 0) {\n                message = 'Test passed';\n            } else {\n                message = result.length + ' errors found';\n            }\n            window.console.log(message);\n            $('#test_results').append($('<p></p>').text(message));\n            if (result.length > 0) {\n                var list = $('<ol></ol>');\n                for (var i = 0; i < result.length; i++) {\n                    window.console.log((i + 1) + ': ' + result[i]);\n                    var element = $('<li></li>');\n                    element.text(result[i]);\n                    list.append(element);\n                }\n                $('#test_results').append(list);\n            }\n        }\n        /**\n         * Basic test assert\n         * @param {boolean} b test result\n         * @param {string} message Optional message\n         */\n        function assert(b, message) {\n            nAsserts++;\n            if (!b) {\n                if (typeof message == 'string') {\n                    result.push(\"Error: \" + message + \" testing \" + testing);\n                }\n            }\n        }\n        /**\n         * Basic test assert\n         * @param {boolean} a Expected\n         * @param {boolean} b Actual\n         * @param {string} message Optional message\n         */\n        function assertEquals(a, b, message) {\n            nAsserts++;\n            if (a != b) {\n                if (typeof message == 'string') {\n                    result.push(\"Error: \" + message + \" testing \" + testing + '. Expected \"' + a + '\" found \"' + b + '\"');\n                }\n            }\n        }\n        /**\n         * Run tests in tests array\n         */\n        function runTests() {\n            for (var i = 0; i < tests.length; i++) {\n                try {\n                    testing = tests[i].name;\n                    tests[i].test();\n                } catch (e) {\n                    result.push(\"Error: Exception \" + e.message + \" testing \" + testing + \"\\n\" + e.stack);\n                }\n            }\n        }\n        tests.push({\n            'name': \"VPLUtil\",\n            'test': function() {\n                assert(VPLUtil.returnTrue(), 'returnTrue');\n                assert(!VPLUtil.returnFalse(), 'returnFalse');\n                (function() {\n                    var rawData = new ArrayBuffer(13);\n                    assertEquals(13, rawData.byteLength, 'rawData.byteLength');\n                    var bufferData = new Uint8Array(rawData);\n                    for (var i = 0; i < bufferData.length; i++) {\n                        bufferData[i] = Math.round(Math.random() * 255);\n                    }\n                    assertEquals(13, bufferData.length, 'bufferData.length');\n                    var stringData = \"abcdeñhfjéÇ123143565387095609784\";\n                    var rawResult = VPLUtil.String2ArrayBuffer(stringData);\n                    var stringResult = VPLUtil.ArrayBuffer2String(rawResult);\n                    assertEquals(stringData, stringResult, 'ArrayBuffer2String');\n                    stringResult = VPLUtil.ArrayBuffer2String(rawData);\n                    rawResult = VPLUtil.String2ArrayBuffer(stringResult);\n                    var bufferResult = new Uint8Array(rawResult);\n                    assertEquals(bufferData.length, bufferResult.length, 'String2ArrayBuffer');\n                    if (bufferData.length == bufferResult.length) {\n                        for (var j = 0; j < bufferData.length; j++) {\n                            assertEquals(bufferData[j], bufferResult[j], 'String2ArrayBuffer values');\n                        }\n                    }\n                })();\n                (function() {\n                    assertEquals('c', VPLUtil.fileExtension('a.c'), 'fileExtension');\n                    assertEquals('C', VPLUtil.fileExtension('a.c.C'), 'fileExtension');\n                    assertEquals('hxx', VPLUtil.fileExtension('a.hxx'), 'fileExtension');\n                    assertEquals('all', VPLUtil.fileExtension('.all'), 'fileExtension');\n                })();\n                (function() {\n                    assert(!VPLUtil.isImage('a.c'), 'isImage');\n                })();\n                (function() {\n                    assert(!VPLUtil.isBinary('a.c'), 'isBinary');\n                })();\n                (function() {\n                    assert(!VPLUtil.isBlockly('a.c'), 'isBlockly');\n                })();\n                (function() {\n                    assert(VPLUtil.validFileName('a.c'), 'validFileName');\n                })();\n            }\n        });\n        runTests();\n        return {\n            start: function() {\n                $(showResults);\n            }\n        };\n    }\n);\n"],"mappings":"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"}