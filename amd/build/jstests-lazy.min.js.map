{"version":3,"file":"jstests-lazy.min.js","names":["define","$","VPLUtil","tests","result","testing","nAsserts","showResults","stat","window","console","log","append","text","message","length","list","i","element","assert","b","push","assertEquals","a","runTests","name","test","e","stack","returnTrue","returnFalse","rawData","ArrayBuffer","byteLength","bufferData","Uint8Array","Math","round","random","stringData","rawResult","String2ArrayBuffer","stringResult","ArrayBuffer2String","bufferResult","j","fileExtension","isImage","isBinary","isBlockly","validFileName","start"],"sources":["../src/jstests-lazy.js"],"sourcesContent":["// This file is part of VPL for Moodle - http://vpl.dis.ulpgc.es/\n//\n// VPL for Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// VPL for Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with VPL for Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * VPL JavaScript test\n *\n * @copyright 2017 Juan Carlos Rodríguez-del-Pino\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author Juan Carlos Rodríguez-del-Pino <jcrodriguez@dis.ulpgc.es>\n */\n\ndefine(\n    [\n        'jquery',\n        'mod_vpl/vplutil',\n    ],\n    function($, VPLUtil) {\n        var tests = [];\n        var result = [];\n        var testing = '';\n        var nAsserts = 0;\n        /**\n         * Show results of tests in page and window.console\n         */\n        function showResults() {\n            var stat = nAsserts + \" asserts tested\";\n            window.console.log(stat);\n            $('#test_results').append($('<p></p>').text(stat));\n            var message;\n            if (result.length == 0) {\n                message = 'Test passed';\n            } else {\n                message = result.length + ' errors found';\n            }\n            window.console.log(message);\n            $('#test_results').append($('<p></p>').text(message));\n            if (result.length > 0) {\n                var list = $('<ol></ol>');\n                for (var i = 0; i < result.length; i++) {\n                    window.console.log((i + 1) + ': ' + result[i]);\n                    var element = $('<li></li>');\n                    element.text(result[i]);\n                    list.append(element);\n                }\n                $('#test_results').append(list);\n            }\n        }\n        /**\n         * Basic test assert\n         * @param {boolean} b test result\n         * @param {string} message Optional message\n         */\n        function assert(b, message) {\n            nAsserts++;\n            if (!b) {\n                if (typeof message == 'string') {\n                    result.push(\"Error: \" + message + \" testing \" + testing);\n                }\n            }\n        }\n        /**\n         * Basic test assert\n         * @param {boolean} a Expected\n         * @param {boolean} b Actual\n         * @param {string} message Optional message\n         */\n        function assertEquals(a, b, message) {\n            nAsserts++;\n            if (a != b) {\n                if (typeof message == 'string') {\n                    result.push(\"Error: \" + message + \" testing \" + testing + '. Expected \"' + a + '\" found \"' + b + '\"');\n                }\n            }\n        }\n        /**\n         * Run tests in tests array\n         */\n        function runTests() {\n            for (var i = 0; i < tests.length; i++) {\n                try {\n                    testing = tests[i].name;\n                    tests[i].test();\n                } catch (e) {\n                    result.push(\"Error: Exception \" + e.message + \" testing \" + testing + \"\\n\" + e.stack);\n                }\n            }\n        }\n        tests.push({\n            'name': \"VPLUtil\",\n            'test': function() {\n                assert(VPLUtil.returnTrue(), 'returnTrue');\n                assert(!VPLUtil.returnFalse(), 'returnFalse');\n                (function() {\n                    var rawData = new ArrayBuffer(13);\n                    assertEquals(13, rawData.byteLength, 'rawData.byteLength');\n                    var bufferData = new Uint8Array(rawData);\n                    for (var i = 0; i < bufferData.length; i++) {\n                        bufferData[i] = Math.round(Math.random() * 255);\n                    }\n                    assertEquals(13, bufferData.length, 'bufferData.length');\n                    var stringData = \"abcdeñhfjéÇ123143565387095609784\";\n                    var rawResult = VPLUtil.String2ArrayBuffer(stringData);\n                    var stringResult = VPLUtil.ArrayBuffer2String(rawResult);\n                    assertEquals(stringData, stringResult, 'ArrayBuffer2String');\n                    stringResult = VPLUtil.ArrayBuffer2String(rawData);\n                    rawResult = VPLUtil.String2ArrayBuffer(stringResult);\n                    var bufferResult = new Uint8Array(rawResult);\n                    assertEquals(bufferData.length, bufferResult.length, 'String2ArrayBuffer');\n                    if (bufferData.length == bufferResult.length) {\n                        for (var j = 0; j < bufferData.length; j++) {\n                            assertEquals(bufferData[j], bufferResult[j], 'String2ArrayBuffer values');\n                        }\n                    }\n                })();\n                (function() {\n                    assertEquals('c', VPLUtil.fileExtension('a.c'), 'fileExtension');\n                    assertEquals('C', VPLUtil.fileExtension('a.c.C'), 'fileExtension');\n                    assertEquals('hxx', VPLUtil.fileExtension('a.hxx'), 'fileExtension');\n                    assertEquals('all', VPLUtil.fileExtension('.all'), 'fileExtension');\n                })();\n                (function() {\n                    assert(!VPLUtil.isImage('a.c'), 'isImage');\n                })();\n                (function() {\n                    assert(!VPLUtil.isBinary('a.c'), 'isBinary');\n                })();\n                (function() {\n                    assert(!VPLUtil.isBlockly('a.c'), 'isBlockly');\n                })();\n                (function() {\n                    assert(VPLUtil.validFileName('a.c'), 'validFileName');\n                })();\n            }\n        });\n        runTests();\n        return {\n            start: function() {\n                $(showResults);\n            }\n        };\n    }\n);\n"],"mappings":"AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,MAAM,CACF,CACI,QAAQ,EACR,iBAAiB,CACpB,EACD,UAASC,CAAC,EAAEC,OAAO,EAAE;EACjB,IAAIC,KAAK,GAAG,EAAE;EACd,IAAIC,MAAM,GAAG,EAAE;EACf,IAAIC,OAAO,GAAG,EAAE;EAChB,IAAIC,QAAQ,GAAG,CAAC;EAIhB,SAASC,WAAWA,CAAA,EAAG;IACnB,IAAIC,IAAI,GAAGF,QAAQ,GAAG,iBAAiB;IACvCG,MAAM,CAACC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;IACxBP,CAAC,CAAC,eAAe,CAAC,CAACW,MAAM,CAACX,CAAC,CAAC,SAAS,CAAC,CAACY,IAAI,CAACL,IAAI,CAAC,CAAC;IAClD,IAAIM,OAAO;IACX,IAAIV,MAAM,CAACW,MAAM,IAAI,CAAC,EAAE;MACpBD,OAAO,GAAG,aAAa;IAC3B,CAAC,MAAM;MACHA,OAAO,GAAGV,MAAM,CAACW,MAAM,GAAG,eAAe;IAC7C;IACAN,MAAM,CAACC,OAAO,CAACC,GAAG,CAACG,OAAO,CAAC;IAC3Bb,CAAC,CAAC,eAAe,CAAC,CAACW,MAAM,CAACX,CAAC,CAAC,SAAS,CAAC,CAACY,IAAI,CAACC,OAAO,CAAC,CAAC;IACrD,IAAIV,MAAM,CAACW,MAAM,GAAG,CAAC,EAAE;MACnB,IAAIC,IAAI,GAAGf,CAAC,CAAC,WAAW,CAAC;MACzB,KAAK,IAAIgB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGb,MAAM,CAACW,MAAM,EAAEE,CAAC,EAAE,EAAE;QACpCR,MAAM,CAACC,OAAO,CAACC,GAAG,CAAEM,CAAC,GAAG,CAAC,GAAI,IAAI,GAAGb,MAAM,CAACa,CAAC,CAAC,CAAC;QAC9C,IAAIC,OAAO,GAAGjB,CAAC,CAAC,WAAW,CAAC;QAC5BiB,OAAO,CAACL,IAAI,CAACT,MAAM,CAACa,CAAC,CAAC,CAAC;QACvBD,IAAI,CAACJ,MAAM,CAACM,OAAO,CAAC;MACxB;MACAjB,CAAC,CAAC,eAAe,CAAC,CAACW,MAAM,CAACI,IAAI,CAAC;IACnC;EACJ;EAMA,SAASG,MAAMA,CAACC,CAAC,EAAEN,OAAO,EAAE;IACxBR,QAAQ,EAAE;IACV,IAAI,CAACc,CAAC,EAAE;MACJ,IAAI,OAAON,OAAO,IAAI,QAAQ,EAAE;QAC5BV,MAAM,CAACiB,IAAI,CAAC,SAAS,GAAGP,OAAO,GAAG,WAAW,GAAGT,OAAO,CAAC;MAC5D;IACJ;EACJ;EAOA,SAASiB,YAAYA,CAACC,CAAC,EAAEH,CAAC,EAAEN,OAAO,EAAE;IACjCR,QAAQ,EAAE;IACV,IAAIiB,CAAC,IAAIH,CAAC,EAAE;MACR,IAAI,OAAON,OAAO,IAAI,QAAQ,EAAE;QAC5BV,MAAM,CAACiB,IAAI,CAAC,SAAS,GAAGP,OAAO,GAAG,WAAW,GAAGT,OAAO,GAAG,cAAc,GAAGkB,CAAC,GAAG,WAAW,GAAGH,CAAC,GAAG,GAAG,CAAC;MACzG;IACJ;EACJ;EAIA,SAASI,QAAQA,CAAA,EAAG;IAChB,KAAK,IAAIP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGd,KAAK,CAACY,MAAM,EAAEE,CAAC,EAAE,EAAE;MACnC,IAAI;QACAZ,OAAO,GAAGF,KAAK,CAACc,CAAC,CAAC,CAACQ,IAAI;QACvBtB,KAAK,CAACc,CAAC,CAAC,CAACS,IAAI,EAAE;MACnB,CAAC,CAAC,OAAOC,CAAC,EAAE;QACRvB,MAAM,CAACiB,IAAI,CAAC,mBAAmB,GAAGM,CAAC,CAACb,OAAO,GAAG,WAAW,GAAGT,OAAO,GAAG,IAAI,GAAGsB,CAAC,CAACC,KAAK,CAAC;MACzF;IACJ;EACJ;EACAzB,KAAK,CAACkB,IAAI,CAAC;IACP,MAAM,EAAE,SAAS;IACjB,MAAM,EAAE,SAAAK,CAAA,EAAW;MACfP,MAAM,CAACjB,OAAO,CAAC2B,UAAU,EAAE,EAAE,YAAY,CAAC;MAC1CV,MAAM,CAAC,CAACjB,OAAO,CAAC4B,WAAW,EAAE,EAAE,aAAa,CAAC;MAC7C,CAAC,YAAW;QACR,IAAIC,OAAO,GAAG,IAAIC,WAAW,CAAC,EAAE,CAAC;QACjCV,YAAY,CAAC,EAAE,EAAES,OAAO,CAACE,UAAU,EAAE,oBAAoB,CAAC;QAC1D,IAAIC,UAAU,GAAG,IAAIC,UAAU,CAACJ,OAAO,CAAC;QACxC,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiB,UAAU,CAACnB,MAAM,EAAEE,CAAC,EAAE,EAAE;UACxCiB,UAAU,CAACjB,CAAC,CAAC,GAAGmB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,GAAG,CAAC;QACnD;QACAhB,YAAY,CAAC,EAAE,EAAEY,UAAU,CAACnB,MAAM,EAAE,mBAAmB,CAAC;QACxD,IAAIwB,UAAU,GAAG,kCAAkC;QACnD,IAAIC,SAAS,GAAGtC,OAAO,CAACuC,kBAAkB,CAACF,UAAU,CAAC;QACtD,IAAIG,YAAY,GAAGxC,OAAO,CAACyC,kBAAkB,CAACH,SAAS,CAAC;QACxDlB,YAAY,CAACiB,UAAU,EAAEG,YAAY,EAAE,oBAAoB,CAAC;QAC5DA,YAAY,GAAGxC,OAAO,CAACyC,kBAAkB,CAACZ,OAAO,CAAC;QAClDS,SAAS,GAAGtC,OAAO,CAACuC,kBAAkB,CAACC,YAAY,CAAC;QACpD,IAAIE,YAAY,GAAG,IAAIT,UAAU,CAACK,SAAS,CAAC;QAC5ClB,YAAY,CAACY,UAAU,CAACnB,MAAM,EAAE6B,YAAY,CAAC7B,MAAM,EAAE,oBAAoB,CAAC;QAC1E,IAAImB,UAAU,CAACnB,MAAM,IAAI6B,YAAY,CAAC7B,MAAM,EAAE;UAC1C,KAAK,IAAI8B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,UAAU,CAACnB,MAAM,EAAE8B,CAAC,EAAE,EAAE;YACxCvB,YAAY,CAACY,UAAU,CAACW,CAAC,CAAC,EAAED,YAAY,CAACC,CAAC,CAAC,EAAE,2BAA2B,CAAC;UAC7E;QACJ;MACJ,CAAC,GAAG;MACJ,CAAC,YAAW;QACRvB,YAAY,CAAC,GAAG,EAAEpB,OAAO,CAAC4C,aAAa,CAAC,KAAK,CAAC,EAAE,eAAe,CAAC;QAChExB,YAAY,CAAC,GAAG,EAAEpB,OAAO,CAAC4C,aAAa,CAAC,OAAO,CAAC,EAAE,eAAe,CAAC;QAClExB,YAAY,CAAC,KAAK,EAAEpB,OAAO,CAAC4C,aAAa,CAAC,OAAO,CAAC,EAAE,eAAe,CAAC;QACpExB,YAAY,CAAC,KAAK,EAAEpB,OAAO,CAAC4C,aAAa,CAAC,MAAM,CAAC,EAAE,eAAe,CAAC;MACvE,CAAC,GAAG;MACJ,CAAC,YAAW;QACR3B,MAAM,CAAC,CAACjB,OAAO,CAAC6C,OAAO,CAAC,KAAK,CAAC,EAAE,SAAS,CAAC;MAC9C,CAAC,GAAG;MACJ,CAAC,YAAW;QACR5B,MAAM,CAAC,CAACjB,OAAO,CAAC8C,QAAQ,CAAC,KAAK,CAAC,EAAE,UAAU,CAAC;MAChD,CAAC,GAAG;MACJ,CAAC,YAAW;QACR7B,MAAM,CAAC,CAACjB,OAAO,CAAC+C,SAAS,CAAC,KAAK,CAAC,EAAE,WAAW,CAAC;MAClD,CAAC,GAAG;MACJ,CAAC,YAAW;QACR9B,MAAM,CAACjB,OAAO,CAACgD,aAAa,CAAC,KAAK,CAAC,EAAE,eAAe,CAAC;MACzD,CAAC,GAAG;IACR;EACJ,CAAC,CAAC;EACF1B,QAAQ,EAAE;EACV,OAAO;IACH2B,KAAK,EAAE,SAAAA,CAAA,EAAW;MACdlD,CAAC,CAACM,WAAW,CAAC;IAClB;EACJ,CAAC;AACL,CAAC,CACJ"}